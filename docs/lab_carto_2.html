<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>GEOU9SP GIS Workbook - 8&nbsp; Lab 8: Making Maps - Part II</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./sec_w5_spatial_analysis_I.html" rel="next">
<link href="./lab_carto_1.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./sec_w4_cartography.html">Week 4 - Making maps</a></li><li class="breadcrumb-item"><a href="./lab_carto_2.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 8: Making Maps - Part II</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">GEOU9SP GIS Workbook</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec_w1_intro_toGIS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 1 - Introduction</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Lab 1: QGIS overview and file management</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_crs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Lab 2: Coordinate Reference Systems</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec_w2_vectors.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 2 - Vector data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_vectors_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Lab 3: Working with vector attributes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_vectors_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Lab 4: Working with vector geometries</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec_w3_rasters.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 3 - Raster data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_rasters_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Lab 5: Working with raster data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_rasters_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lab 6: The raster calculator and other rastery bits</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec_w4_cartography.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 4 - Making maps</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_carto_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Lab 7: Making Maps - Part I</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_carto_2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 8: Making Maps - Part II</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec_w5_spatial_analysis_I.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 5 - Spatial analysis I</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_catchup1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Lab 9 - Catch Up / Assignment Work session</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_geoprocessing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Lab 10: Geoprocessing tools</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./sec_w6_spatial_analysis_II.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Week 6 - Spatial analysis II</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_joins.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Lab 11 - Data Joins</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_zonal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Lab 12 - Zonal Statistics and Overlap analysis</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Week 8 - Spatial analysis III</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Week 10 - Obtaining spatial data in the field</span></span>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#getting-ready" id="toc-getting-ready" class="nav-link active" data-scroll-target="#getting-ready"><span class="header-section-number">8.1</span> Getting Ready</a></li>
  <li><a href="#guided-exercise-1---digitizing-the-castle" id="toc-guided-exercise-1---digitizing-the-castle" class="nav-link" data-scroll-target="#guided-exercise-1---digitizing-the-castle"><span class="header-section-number">8.2</span> Guided Exercise 1 - Digitizing the castle</a></li>
  <li><a href="#guided-exercise-2---adding-places-and-labels" id="toc-guided-exercise-2---adding-places-and-labels" class="nav-link" data-scroll-target="#guided-exercise-2---adding-places-and-labels"><span class="header-section-number">8.3</span> Guided Exercise 2 - Adding places and labels</a></li>
  <li><a href="#guided-exercise-3---laying-out-the-final-map" id="toc-guided-exercise-3---laying-out-the-final-map" class="nav-link" data-scroll-target="#guided-exercise-3---laying-out-the-final-map"><span class="header-section-number">8.4</span> Guided Exercise 3 - Laying out the final map</a>
  <ul class="collapse">
  <li><a href="#the-legend" id="toc-the-legend" class="nav-link" data-scroll-target="#the-legend"><span class="header-section-number">8.4.1</span> The Legend</a></li>
  <li><a href="#adding-a-scale-bar" id="toc-adding-a-scale-bar" class="nav-link" data-scroll-target="#adding-a-scale-bar"><span class="header-section-number">8.4.2</span> Adding a scale bar</a></li>
  <li><a href="#adding-a-graticule" id="toc-adding-a-graticule" class="nav-link" data-scroll-target="#adding-a-graticule"><span class="header-section-number">8.4.3</span> Adding a Graticule</a></li>
  <li><a href="#adding-a-north-arrow" id="toc-adding-a-north-arrow" class="nav-link" data-scroll-target="#adding-a-north-arrow"><span class="header-section-number">8.4.4</span> Adding a North Arrow</a></li>
  </ul></li>
  <li><a href="#guided-exercise-4---adding-map-annotations" id="toc-guided-exercise-4---adding-map-annotations" class="nav-link" data-scroll-target="#guided-exercise-4---adding-map-annotations"><span class="header-section-number">8.5</span> Guided Exercise 4 - Adding map annotations</a></li>
  <li><a href="#guided-exercise-5---adding-map-insets" id="toc-guided-exercise-5---adding-map-insets" class="nav-link" data-scroll-target="#guided-exercise-5---adding-map-insets"><span class="header-section-number">8.6</span> Guided Exercise 5 - Adding map insets</a></li>
  <li><a href="#independent-exercise-1---adding-a-second-coordinate-grid-and-a-second-inset-map" id="toc-independent-exercise-1---adding-a-second-coordinate-grid-and-a-second-inset-map" class="nav-link" data-scroll-target="#independent-exercise-1---adding-a-second-coordinate-grid-and-a-second-inset-map"><span class="header-section-number">8.7</span> Independent Exercise 1 - Adding a second coordinate grid and a second inset map</a></li>
  <li><a href="#independent-exercise-2---exporting-your-map" id="toc-independent-exercise-2---exporting-your-map" class="nav-link" data-scroll-target="#independent-exercise-2---exporting-your-map"><span class="header-section-number">8.8</span> Independent Exercise 2 - Exporting your map</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./sec_w4_cartography.html">Week 4 - Making maps</a></li><li class="breadcrumb-item"><a href="./lab_carto_2.html"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 8: Making Maps - Part II</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-carto2" class="quarto-section-identifier"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Lab 8: Making Maps - Part II</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this lab we will continue working on our map of the Bamburgh Castle region, this time focusing on manually digitizing polygons, labeling, and finishing our actual map page layout.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>To complete this lab, you <em>must</em> watch the practical videos on how to manually digitise features in QGIS, which are available on the Week 4 prep page on Canvas</p>
</div>
</div>
<section id="getting-ready" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="getting-ready"><span class="header-section-number">8.1</span> Getting Ready</h2>
<p>Make sure you restore the project folder and files you created in the previous lab, and then open your project.</p>
</section>
<section id="guided-exercise-1---digitizing-the-castle" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="guided-exercise-1---digitizing-the-castle"><span class="header-section-number">8.2</span> Guided Exercise 1 - Digitizing the castle</h2>
<p>One thing that seems to be missing from our map is more emphasis on the castle’s location. Let us use the aerial photo we acquired to digitize the castle area.</p>
<ol class="example" type="1">
<li>Add to your project the aerial orthophoto you downloaded at the start of the previous lab. If you had a wide selection and downloaded multiple tiles, the correct file is <code>nu1835_rgb_250_03.jpg</code>. It may be that the photo comes without a CRS defined (a question mark icon will appear to the right of the layer name). If that happens, just right click on the layer name, and select <code>Layer CRS &gt; Set Layer CRS</code> to pick EPSG:27700.</li>
</ol>
<div class="callout callout-style-default callout-important callout-titled" title="Stop and Think">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stop and Think
</div>
</div>
<div class="callout-body-container callout-body">
<p>Why did we use <code>Set Layer CRS</code> and not <code>Reproject</code>?</p>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Click for answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click for answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>In this case, we <em>know</em> the aerial photo uses the EPSG:27700 CRS (by looking at the metadata, and also by knowing that any UK official cartographic product uses it). It is just a matter if informing QGIS what the CRS is, as it was not properly detected when the layer was added to the project. We use <code>Reproject</code> when the layer <em>already</em> has a defined CRS, and we want to <em>change it</em> to a different CRS (meaning likely a different datum, projection and maybe even a different coordinate type - such as from degrees to meters), and thus we need to <em>transform</em> (i.e.&nbsp;calculate) a new set of coordinates.</p>
</div>
</div>
</div>
<ol start="2" class="example" type="1">
<li>No we need a new empty layer to digitise on. Click on the <code>New shapefile layer</code> button (<img src="https://docs.qgis.org/3.34/en/_images/mActionNewVectorLayer.png" class="img-fluid"> ) on the main QGIS toolbar. You will get the <code>New Shapefile Layer</code> window:</li>
</ol>
<p><img src="images/lab_8/lab8_fig1_newshape_window.jpg" class="img-fluid"></p>
<ol start="3" class="example" type="1">
<li><p>First pick a folder to save your file and name it <code>bamburgh_castle</code>, on the <code>File Name</code> box. Then for <code>Geometry type</code>, pick <code>Polygon</code>, and pick EPSG:27700 for the CRS. Notice how QGIS automatically creates an integer attribute named <code>id</code>. We want a text attribute to hold the castle name, though, so enter <code>name</code> as the name of the field on the <code>New Field</code> options, then pick the <code>Text (string)</code> data type and a length of <code>80</code> (the default) and click on <code>Add to Fields List</code>. You should see the new <code>name</code> field added to the fields list. Then click <code>OK</code>.</p></li>
<li><p>Find your new layer on the <code>Layer Panel</code>. It doesn’t have any geometries yet, so you won’t see anything on your map. Highlight your new layer, and then put it into editing mode by clicking on the <code>Toggle Editing</code> button (<img src="https://docs.qgis.org/3.34/en/_images/mActionToggleEditing.png" class="img-fluid">) on the main QGIS toolbar. Make sure you are editing the right layer (it should have a pencil symbol on top of the symbology colour on the layer list).</p></li>
<li><p>Now right-click on the aerial photo layer and select <code>Zoom to Layer(s)</code> to centre the map canvas on it. Then manually set a scale of 1:1500 on the bottom QGIS bar. It is important to be aware of the scale you are digitizing at, and keep it constant so that the level of detail is also constant. Drag the castle to the middle of the canvas using the <code>Pan Map</code> tool (the hand).</p></li>
<li><p>Now highlight the new shapefile layer (which is being edited) again. The <code>Digitizing tools</code> toolbar (<img src="images/lab_8/lab8_fig2_digi_tools.jpg" class="img-fluid">) should be available. Click on the <code>Add Polygn Feature</code> button (<img src="https://docs.qgis.org/3.34/en/_images/mActionCapturePolygon.png" class="img-fluid">) to enter a polygon drawing mode. Start clicking anywhere in the castle outer walls, and then keep clicking to trace the entire castle shape. Once you finish you polygon, right-click to end the drawing. A window will pop-up asking you to enter an <code>id</code> and <code>name</code>. Enter <code>1</code> and <code>Bamburgh Castle</code> respectively.</p></li>
<li><p>If you want to edit the polygon shape after the fact, use the <code>Vertex Tool</code> (<img src="https://docs.qgis.org/3.34/en/_images/mActionVertexToolActiveLayer.png" class="img-fluid">). Then click once on a vertex to select it, and then cick again to reposition it, or the Delete key on your keyboard to delete it. You can also add a new vertex by hovering the mouse in between vertices until you see a red <code>x</code>. You should end up with something like this:</p></li>
</ol>
<p><img src="images/lab_8/lab8_fig4_digitsed_castle.jpg" class="img-fluid"></p>
<ol start="8" class="example" type="1">
<li>Once you’re happy with your polygon, remember to click the <code>Save Layer Edits</code> button (on the editing toolbar - <em>not</em> the <code>Save project</code> button) and then exit editing mode. Set you map back to the 1:80000 scale you decided on in the previous lab, and pick a strong and visible colour for the castle polygon. Turn off the aerial image again, and save your project.</li>
</ol>
</section>
<section id="guided-exercise-2---adding-places-and-labels" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="guided-exercise-2---adding-places-and-labels"><span class="header-section-number">8.3</span> Guided Exercise 2 - Adding places and labels</h2>
<p>No good map is complete without the addition of informative <em>labels</em>, which help add context and reference. QGIS has very powerful labelling features (which we will only lightly explore), but you should always spend some good effort on labelling - it often turns a good map into a great map.</p>
<div class="callout callout-style-default callout-important callout-titled" title="Stop and Think">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stop and Think
</div>
</div>
<div class="callout-body-container callout-body">
<p>When should I use labels and when should I use the map legend to name things?</p>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Click for answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click for answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>As a rule of thumb, legend names indicates <em>categories</em> or <em>groups</em> of things, as well as <em>continuous</em> variables. Labels identify <em>unique</em> things. For example, if there were multiple castles in the map, you could have a legend symbol indicating “castle” (a category of thing), and then labels showing the names of each castle. If you wanted to indicate a specific mountain peak in your elevation map, you would still have an “Elevation” item on the legend explaining the elevation symbology (a continuous variable), and then a point symbol and a label to identify the particular peak. If there were multiple peaks, then you would add a “Mountain Peak” item to the legend, associated with the point symbol you selected to indicate peaks. But this is not essential when there is only a single item in the category (like our single castle).</p>
</div>
</div>
</div>
<ol start="9" class="example" type="1">
<li>Right click on the castle layer you created and go to <code>Properties &gt; Labels</code>. Change the <code>No Labels</code> box to <code>Single Labels</code>, to reveal several options. For <code>Value</code>, pick the <code>name</code> attribute, which contains our layer name. On the <code>Text</code> sub-tab, increase the font size to <code>14</code>, and on the <code>Buffer</code> sub-tab, click on <code>Draw Text Buffer</code>. Click on <code>Apply</code>, and you should get a label like in the figure below:</li>
</ol>
<p><img src="images/lab_8/lab8_fig5_label_window.jpg" class="img-fluid"></p>
<ol start="10" class="example" type="1">
<li>The label is however hiding the actual castle polygon. So return to <code>Properties &gt; Labels</code> and go to the <code>Placement</code> sub-tab, change the <code>Mode</code> to <code>Outside Polygons</code>, and set <code>Distance</code> to 1 millimetre. The label should move to the right of the polygon now.</li>
</ol>
<p>Next, let us add some named places to the map, to help with navigation. For that we will use another layer from the <em>Vector Map District</em> OS database we downloaded, the <code>NU_Named_Place</code> layer.</p>
<ol start="11" class="example" type="1">
<li>Add the <code>NU_NamedPlace.shp</code> layer to your project. You will see a large number of points appear, probably too many to look good. But this dataset has information on the type of place (<code>CLASSIFICA</code>) and an indication of place importance (<code>FONTHEIGHT</code>), that we could use to reduce the number of points.</li>
</ol>
<div class="callout callout-style-default callout-important callout-titled" title="Stop and Think">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stop and Think
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="a">
<li><p>How would you reduce the number of points show based on the above attributes?</p></li>
<li><p>Why do the attributes have truncated names such as <code>CLASSIFICA</code>?</p></li>
</ol>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Click for answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click for answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="a">
<li><p>You could go to the attribute table and use <code>Select by expression</code> to select the specific combination of attributes you wanted. But we will learn a different way below.</p></li>
<li><p>Because shapefile is a very old format, back when memory and storage were <em>very</em> limited. So they have an imposed limitation of ten characters as the maximum length of a field name - if you create a new field on a <code>.shp</code> file and name it something longer than 10 characters, the name will be cut-off at the tenth character. Geopackages don’t have that restriction.</p></li>
</ol>
</div>
</div>
</div>
<p>If we want to limit the number of features that are <em>available</em> to us in a layer, we can use the <code>Filter</code> method instead of<code>Select by Expression</code>. While selecting is useful to create a <em>selection</em> that you can then export or summarise, filtering will essentially <em>hide</em> the information from view and manipulation - as if it didn’t exist. Let us filter our named places to only medium and large populated places.</p>
<ol start="12" class="example" type="1">
<li>Right click on the <code>NU_namedPlace layer</code> and select <code>Filter...</code>. You will see a new window similar to the <code>Select by Expression</code> window. On this window, you can pick attributes on the top left, and then list all unique values of each attribute in the top right (select the attribute then click on<code>All</code>). You can then double click on attribute names, values and operators, or simply type your expression in the bottom window. For this dataset, we want to filter using the following expression: <code>"CLASSIFICA" = 'Populated Place' AND ("FONTHEIGHT" = 'Medium' OR "FONTHEIGHT" = 'Large')</code>. Notice the parentheses! Then click on <code>OK</code>.</li>
</ol>
<p><img src="images/lab_8/lab8_fig6_filtering.jpg" class="img-fluid"></p>
<div class="callout callout-style-default callout-important callout-titled" title="Stop and Think">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Stop and Think
</div>
</div>
<div class="callout-body-container callout-body">
<p>Why do we use a set of parentheses to encapsulate the <code>OR</code> statement in the expression above?</p>
</div>
</div>
<div class="callout callout-style-simple callout-important no-icon callout-titled" title="Click for answer">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click for answer
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Boolean operators are processed as mathematical operations, from left to right. So if we typed <code>"CLASSIFICA" = 'Populated Place' AND "FONTHEIGHT" = 'Medium' OR "FONTHEIGHT" = 'Large'</code> without parentheses, QGIS would first look for the features that are a populated place <em>and</em> medium, and then try to find large places within this first selection. But we want for it to first find all medium <em>or</em> large places and then from these pick only the ones that are <em>also</em> (the <code>AND</code>) populated places. As with maths, the parentheses ensure we solve the <code>OR</code> first.</p>
</div>
</div>
</div>
<p>You should now have a lot less Named Places scattered through the map, and if you inspect the attribute table, you will see only the filtered results. It is as if the rest of the data doesn’t exist! You will always know if a layer is being filtered by the ‘funnel’ symbol to the right of the layer name (and you can click on the symbol to edit or clear the filter).</p>
<ol start="13" class="example" type="1">
<li><p>Now follow the same procedure you used to label Bamburgh Castle to label the populated places, using the <code>DISTNAME</code> attribute - but use a font size of <code>10</code> to keep the <em>visual hierarchy</em> in relation to the castle, and keep the <code>Placement</code> option as the default <code>Cartographic</code> option.</p></li>
<li><p>Change the <code>Symbology</code> of the <code>NU_NamedPlaces</code> layer to the preset symbol <code>topo pop capital</code> (a white circle with a black dot in the middle), with a <code>Size</code> of <code>2.4</code>.</p></li>
<li><p>Add the <code>NU_RailwayStation.shp</code> file to your map, and label it using the <code>DISTNAME</code> attribute as well (you should see only one station, ‘Chathill’). Make the label size <code>10</code>, colour it <code>blue</code> and make its style <code>bold italic</code>, and do not use a <code>buffer</code> this time.</p></li>
<li><p>Now go to the <code>Symbology</code> tab for the railway station layer, and pick <code>Single Symbol</code>. Select the <code>Simple Marker</code> sub-item, and then change the <code>Symbol layer type</code> from <code>Simple Marker</code> to <code>SVG Marker</code>. SVG stands for ‘Scalable Vector Graphics’ and is a commonly used format to store figures in desktop publishing.</p></li>
<li><p>Once you change the <code>Symbol layer type</code>, a new <code>SVG Browser</code> section will appear below. In there, find the <code>transport</code> folder on the browser to the left, and pick the railway symbol (looks like a train). Then above it, change the <code>Fill Color</code> to the same blue you used for the label, and decrease the <code>Stroke Width</code> until it says <code>No stroke</code>. Increase the size of the symbol to <code>6</code> (width and height should be linked by default). Your options should look like this (<code>stroke colour</code> doesn’t matter):</p></li>
</ol>
<p><img src="images/lab_8/lab8_fig8_train_symbol.jpg" class="img-fluid"></p>
<p>Good job with labelling! Your map should now be looking like this:</p>
<p><img src="images/lab_8/lab8_fig7_map_with_labels.jpg" class="img-fluid"></p>
<ol start="18" class="example" type="1">
<li>Save your project.</li>
</ol>
</section>
<section id="guided-exercise-3---laying-out-the-final-map" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="guided-exercise-3---laying-out-the-final-map"><span class="header-section-number">8.4</span> Guided Exercise 3 - Laying out the final map</h2>
<p>We have now added everything we want to our map, and styled and labelled it properly. Now it is time to work on the final page layout for our map. This is where we add the critical <em>cartographic elements</em> that turn a <em>figure</em> into a <em>map</em> (legend, scale, graticule, north arrow), and include some <em>map insets</em> and <em>annotations</em> to facilitate map interpretation.</p>
<section id="the-legend" class="level3" data-number="8.4.1">
<h3 data-number="8.4.1" class="anchored" data-anchor-id="the-legend"><span class="header-section-number">8.4.1</span> The Legend</h3>
<p>The map legend is the most important cartographic element, as it associates meaning to all the <em>visual variables</em> (colours, symbols, sizes, patterns) you have used on your map. QGIS has a handy tool to generate the legend automatically, but we should always tweak the end results to improve map readability.</p>
<ol start="19" class="example" type="1">
<li><p>Go to the menu <code>Project &gt; Layouts</code> and pick the layout you created in the previous lab, when you were deciding on the scale and coverage of your map. The <code>Layout editor</code> window will launch separately from the main QGIS window.</p></li>
<li><p>Either go to the menu <code>Add Item &gt; Add Legend</code> or click the <code>Add Legend</code> button (<img src="https://docs.qgis.org/3.34/en/_images/mActionAddLegend.png" class="img-fluid">) on the vertical toolbar to the right. The cursor will turn into a cross. Then <em>click and drag</em> to create a legend on the lower right corner of the page. It will look to big and go outside the page - don’t worry, we will fix it next.</p></li>
</ol>
<p><img src="images/lab_8/lab8_fig9_ugly_legend.jpg" class="img-fluid"></p>
<ol start="21" class="example" type="1">
<li><p>The first thing we will do is clean up the legend. By default QGIS will add all active layers to the legend. Select the <code>Legend</code> item on the top left of the Layout window (under <code>Items</code>), and then select the <code>Item Properties</code> tab on the bottom right.</p></li>
<li><p>First set the name of the legend as <code>Legend</code> (type it on the box). Then uncheck the <code>Auto Update</code> option, and start removing items by selecting them and clicking on the red ‘minus’ button at the bottom of the layer list. You want to end up with a legend like the one below (use the green ‘plus’ button to add a layer back if you remove it by mistake):</p></li>
</ol>
<p><img src="images/lab_8/lab8_fig10_clean_legend.jpg" class="img-fluid"></p>
<ol start="23" class="example" type="1">
<li><p>In my case, I also used the same symbology for <code>Primary Road</code> and <code>Primary Road Collapsed Dual Carriageway</code>, so no need to have both in the legend. Again, I can expand the <code>NU_Road_clip</code> layer on the legend layer list, select only the <code>Primary Road Collapsed Dual Carriageway</code> item and remove it with the red minus button.</p></li>
<li><p>For the <code>OS_50_DEM_NU</code> layer, we don’t need the <code>Band 1(Grey)</code> sub-name, so remove it as well. The legend should now be looking like this:</p></li>
</ol>
<p><img src="images/lab_8/lab8_fig11_cleaner_legend.jpg" class="img-fluid"></p>
<ol start="25" class="example" type="1">
<li>This legend is occupying a lot of space in our map. Scroll down past the layer list on the legend <code>Item Properties</code>, until you find the option <code>Fonts and Text Formatting</code>. Expand it by clicking on the arrow, and then reduce the font sizes of the several options by 4 points. To do that, click on the down-arrow to the right of each <code>Font</code> box, and change the font size at the top of the menu.</li>
</ol>
<p><img src="images/lab_8/lab8_fig12_fontsize.jpg" class="img-fluid"></p>
<ol start="26" class="example" type="1">
<li>The spacing between items seems to be excessive now, so find the <code>Spacing</code> option for the Legend item and reduce all non-zero spacing by 1mm, <em>except</em> for the <code>Column Space</code> option - set that one to <code>3</code>. It will have an effect later.</li>
</ol>
<p>Our legend is looking much better, but there is a big problem: the item names reflect the file names, and your map readers won’t know what <code>NU_NamedPlace</code> means. So we should rename our layers to have intelligible names. You <em>can</em> rename your layers in the Map Layout by going back to the legend <code>Item Properties</code> and double clicking each item. But I think it is a better idea to rename the actual layers in the QGIS project. This way, if you decide to add/remove other layers to the legend, you won’t need to rename then again.</p>
<ol start="27" class="example" type="1">
<li>Go back to the main QGIS window, and rename all the layers in the legend to proper, readable names. For example, <code>NU_RailwayStation</code> to Railway Station, <code>NU_NamedPlace</code> to <code>City/Town</code>, etc. Try to use short names:</li>
</ol>
<p><img src="images/lab_8/lab8_fig13_named_legend.jpg" class="img-fluid"></p>
<ol start="28" class="example" type="1">
<li><p>Now that we have nice and short names, we can also save space by breaking the legend into columns. Go back to the Layout editor, and on the Legend <code>Item Properties</code> find the <code>Columns</code> option and increase <code>Count</code> to <code>2</code>. Your legend should now have two columns, spaced 3mm (remember the <code>Column Space</code> option you set a few steps above?)</p></li>
<li><p>The extra space gives us the chance to expand our elevation bar a bit. Go back to the list of legend layers in the Legend <code>Item Properties</code>, and double click on the <code>Elevation</code> colour bar. Leave the <code>Width</code> as <code>default</code>, and set the height to <code>20</code>. Also add <code>m</code> as the <code>Suffix</code> so we have clearly labelled units. Your final legend should now look like this:</p></li>
</ol>
<p><img src="images/lab_8/lab8_fig14_final_legend.jpg" class="img-fluid"></p>
<ol start="30" class="example" type="1">
<li>Save your layout.</li>
</ol>
</section>
<section id="adding-a-scale-bar" class="level3" data-number="8.4.2">
<h3 data-number="8.4.2" class="anchored" data-anchor-id="adding-a-scale-bar"><span class="header-section-number">8.4.2</span> Adding a scale bar</h3>
<p>Every proper map needs a scale bar. Luckily, since all data in QGIS is <em>georeferenced</em>, the Map Layout editor can automatically calculate the correct size for indicating scaled distances in our map.</p>
<ol start="31" class="example" type="1">
<li>Go to the menu <code>Add Item &gt; Add Scale Bar</code>, or click the <code>Add Scale Bar</code> button (<img src="https://docs.qgis.org/3.34/en/_images/mActionScaleBar.png" class="img-fluid">), and drag a box to add a scale to the top left of the map area, over the ‘ocean’.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>We want to make sure the cartographic elements do not cover information on the map. Because we have a large plain ocean area in this map, which is not of much interest, it is OK to add the scale bar there. But if the map had relevant info throughout, it would be better to place the scale outside the map area.</p>
</div>
</div>
<ol start="32" class="example" type="1">
<li>Repeat this process and add a second scale bar below the first. Then select one of the scale bars on the <code>Items</code> list, and then on its <code>Item Properties</code> change the units from <code>Kilometers</code> to <code>Miles</code>. We now made our map accessible to both <del>civilized and barbarian people</del> metric and imperial thinkers.</li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Feel free to play with the <code>Style</code>, <code>Segments</code> and other <code>Item Properties</code> of your scale bars to tailor them to your taste.</p>
</div>
</div>
<ol start="33" class="example" type="1">
<li>Save your layout.</li>
</ol>
</section>
<section id="adding-a-graticule" class="level3" data-number="8.4.3">
<h3 data-number="8.4.3" class="anchored" data-anchor-id="adding-a-graticule"><span class="header-section-number">8.4.3</span> Adding a Graticule</h3>
<p>The <em>graticule</em> (coordinate grid) is another essential cartographic element - without it our map is not showing proper <em>spatial</em> information. A good graticule facilitates navigation without obscuring the map elements. Let us add a graticule to our map:</p>
<ol start="34" class="example" type="1">
<li><p>On the <code>Items</code> list, select the <code>Map 1</code> object. That is your main map frame. Go to its <code>Item Properties</code> and find the <code>Grids</code> option. Expand it and click on the green plus button to create a new graticule, which will show up below it as <code>Grid 1</code>.</p></li>
<li><p>Select <code>Grid 1</code> and click on <code>Modify Grid</code>. A new set of options will appear:</p></li>
</ol>
<p><img src="images/lab_8/lab8_fig15_grid_options.jpg" class="img-fluid"></p>
<ol start="36" class="example" type="1">
<li><p>We will set several options here to have a nice grid. First, we need to decide our <code>Interval</code> in the <code>X</code> and <code>Y</code> directions. This is the spacing between coordinate lines. We are using the OSGB CRS (EPSG:27700) with metric coordinates, so this interval will be in meters. Let us add coordinates every 5km by changing both <code>X</code> and <code>Y</code> spacing to <code>5000</code>. You should now see a grid of lines in the map.</p></li>
<li><p>The squares formed by the lines seem a bit ‘offset’ in relation to the map area. We can shift them so they are nicely centred in the vertical and horizontal direction by adding <code>X</code> and <code>Y</code> offsets. On my map, an <code>X</code> offset of <code>500</code> and a <code>Y</code> offset of <code>-1500</code> centres the grid nicely. You may need to use different values depending on your choice of framing.</p></li>
<li><p>I now have coordinate lines, but they have no coordinate numbers, thus so far my grid is useless. Next set the <code>Frame Style</code> option to <code>Exterior Ticks</code>, then keep scrolling down until you reach the <code>Draw Coordinates</code> option. Check the box and coordinate numbers will appear at each line. But they do not align well with the frame, and also have useless decimal places.</p></li>
<li><p>Our coordinates also have no axis indication, so change the <code>Format</code> option from <code>Decimal</code> to <code>Decimal with Suffix</code>. That will add the easting (E) and Northing(N) indicators.</p></li>
<li><p>Below <code>Draw Coordinates</code>, you see sets of options labelled <code>Left</code>, <code>Right</code>, <code>Top</code> and <code>Bottom</code>. Change the third option for <code>Left</code> from <code>Horizontal</code> to <code>Vertical Ascending</code>, and for <code>Right</code> to <code>Vertical Descending</code>. Then at the bottom of the <code>Draw Coordinates</code> section, set <code>Coordinate Precision</code> to <code>0</code> to remove the decimal places.</p></li>
<li><p>If we expected our map users to navigate using a compass, the actual grid lines would be useful. But since this is unlikely, the actual black grid lines are too obtrusive. Go back to the top of the <code>Map Grid Properties</code>, and change the <code>Grid Type</code> from <code>Solid</code> to <code>Frame and Annotations Only</code>.</p></li>
<li><p>Finally, let us add a black border to our map for aesthetic purposes. Go back to the main <code>Item Properties</code> for <code>Map 1</code>, and find the <code>Framè</code> option. Enable the checkbox to add a frame. Save your layout.</p></li>
</ol>
<p>My map layout is now looking like this:</p>
<p><img src="images/lab_8/lab8_fig16_layout_with_grid.jpg" class="img-fluid"></p>
</section>
<section id="adding-a-north-arrow" class="level3" data-number="8.4.4">
<h3 data-number="8.4.4" class="anchored" data-anchor-id="adding-a-north-arrow"><span class="header-section-number">8.4.4</span> Adding a North Arrow</h3>
<p>A North Arrow is only strictly necessary if your longitude grid lines are not parallel, but we will add one so you know how (and make sure you show us you’ve learned how on the assessment!).</p>
<ol start="43" class="example" type="1">
<li><p>Go to the menu <code>Add Item &gt; Add North Arrow</code> or click on the <code>Add North Arrow</code> button (can you spot it?), and drag the mouse where you want your North arrow to be. It is by convention usually placed on the top left corner, so I’ll move the scale bars a little to the left and then place my arrow there.</p></li>
<li><p>If you select the <code>North Arrow</code> item and go to its <code>Item Properties</code> you will see there are many SVG symbols for north arrows, in the <code>arrows</code> and <code>wind roses</code> folders. Pick any one you like. Save your layout.</p></li>
</ol>
</section>
</section>
<section id="guided-exercise-4---adding-map-annotations" class="level2" data-number="8.5">
<h2 data-number="8.5" class="anchored" data-anchor-id="guided-exercise-4---adding-map-annotations"><span class="header-section-number">8.5</span> Guided Exercise 4 - Adding map annotations</h2>
<p>Annotations help our readers understand the map. The main piece of annotation any <em>standalone</em> map should have is a <strong>title</strong> (you can omit the title if your map is a figure in a document, where there will be an explanatory caption under it). We also want to add some information such as data sources, map author, the CRS used and the map scale.</p>
<ol start="45" class="example" type="1">
<li>Add an annotation frame under the map legend using <code>Add Item &gt; Add Label</code> or the <code>Add Label</code> button (<img src="https://docs.qgis.org/3.34/en/_images/mActionLabel.png" class="img-fluid">). On the <code>Item Properties</code> for your new label, you will see a text box saying <code>Lorem Ipsum</code>. These are two words in Latin from a text passage that has historically been used by designers to indicate placeholder text (see <a href="https://en.wikipedia.org/wiki/Lorem_ipsum">lorem ipsum</a>). Replace the <code>Lorem Ipsum</code> by the following text, including the line breaks and line spaces:</li>
</ol>
<p>EPSG:27700</p>
<p>1:80000</p>
<p>Author: (your student number)</p>
<p>Data source: Digimap 2024</p>
<ol start="46" class="example" type="1">
<li><p>Under the text box, select <code>Center</code> for <code>Horizontal Alignment</code>, and set font size to <code>8</code>. Then move your legend up until you can fit this annotation under it.</p></li>
<li><p>Now add a Map title, using the same Text Label tool, such as <code>Bamburgh Castle -  Northumberland, UK</code>. You may want to resize your main map frame a bit to make room for the title above it. Set it to <code>bold</code> and font size <code>14</code>.</p></li>
</ol>
<p>My map now looks like this:</p>
<p><img src="images/lab_8/lab8_fig19_almost_done.jpg" class="img-fluid"></p>
<ol start="48" class="example" type="1">
<li>Save your layout.</li>
</ol>
</section>
<section id="guided-exercise-5---adding-map-insets" class="level2" data-number="8.6">
<h2 data-number="8.6" class="anchored" data-anchor-id="guided-exercise-5---adding-map-insets"><span class="header-section-number">8.6</span> Guided Exercise 5 - Adding map insets</h2>
<p>A common element of maps that aids map use is the inclusion of <em>map insets</em>, ‘sub maps’ that show either a portion of the main map in higher detail or the location of the main map on a broader scale map. We will add both to our design</p>
<ol start="49" class="example" type="1">
<li>Insert a new map area on the top left corner of your layout using the <code>Add Map</code> (<img src="https://docs.qgis.org/3.34/en/_images/mActionAddMap.png" class="img-fluid">) button. It will by default be named as <code>Map 2</code> on the <code>Items</code> list:</li>
</ol>
<p><img src="images/lab_8/lab8_fig17_first_inset.jpg" class="img-fluid"></p>
<ol start="50" class="example" type="1">
<li>Before we move forward, let us rename our map items to make our work easier. Double-click on <code>Map 1</code> in the <code>Items</code> list and rename it to <code>Main Map</code>, then double-click on <code>Map 2</code> and rename it to <code>Overview Map</code>. Save your layout.</li>
</ol>
<p>For now our overview map shows the exact same content as the main map - the maps are by default tied to the QGIS main window. To be able to show separate maps, we need to associate each map with a QGIS <em>theme</em>. We will do this now.</p>
<ol start="51" class="example" type="1">
<li><p>First, go back to the main QGIS window, and add the <code>GB_Overview_Plus.tif</code> file to your layers. Turn its visibility <em>off</em>.</p></li>
<li><p>Now make sure all (and only) the layers you want to be visible on the main map are on, and the others are off. Then click on the small ‘eye’ button on the top of the <code>Layers</code> panel, and click on <code>Add Theme</code>. Name your theme <code>Main Map</code>.</p></li>
<li><p>Now turn off all layers <em>except</em> the GB Overview Layer, and repeat the steps above to create an <code>Overview</code> theme.</p></li>
<li><p>Click again on the ‘eye’ button and select the <code>Main Map</code> theme. It will revert to the selection of layers you had turned on when you created the theme. Themes are a useful way to have shortcuts to different sets of visible layers.</p></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you need to change an existing theme, activate/deactivate the layers you want, and then click on the eye button and select <code>Replace Theme</code>.</p>
</div>
</div>
<ol start="55" class="example" type="1">
<li><p>Now go back to the Layout Editor window, and select the <code>Main Map</code> item. On its <code>Item Properties</code>, find the <code>Layers</code> option and enable the <code>Follow Map Theme</code> option, picking the <code>Main Map</code>theme. Then do the same with the <code>Overview Map</code>, and set it to the <code>Overview</code> theme.</p></li>
<li><p>Set the scale of the overview map (on its <code>Item Properties</code>) to 5000000 (five million), and use the <code>Move item content</code> (<img src="https://docs.qgis.org/3.34/en/_images/mActionMoveItemContent.png" class="img-fluid">) tool so that Newcastle is about centred on the map. This map has ‘painted-on’ labels, so make sure you don’t cut off any labels when placing your map.</p></li>
</ol>
<p>Now we need to indicate ‘where’ in the overview map is the main map located. QGIS has a nice feature to do that for us automatically:</p>
<ol start="57" class="example" type="1">
<li>Go to the <code>Item Options</code> of the <code>Overview Map</code> and find the <code>Overviews</code> option. Expand it and click on the green plus symbol to add an overview. Select the newly created <code>Overview 1</code>, and on the <code>Map Frame</code> option below it, select <code>Main Map</code>. You should now see a transparent pink box indicating the location and coverage of the Main Map on the Overview map inset.</li>
</ol>
<p>The map should now look like this:</p>
<p><img src="images/lab_8/lab8_fig20_almost__almost_done.jpg" class="img-fluid"></p>
</section>
<section id="independent-exercise-1---adding-a-second-coordinate-grid-and-a-second-inset-map" class="level2" data-number="8.7">
<h2 data-number="8.7" class="anchored" data-anchor-id="independent-exercise-1---adding-a-second-coordinate-grid-and-a-second-inset-map"><span class="header-section-number">8.7</span> Independent Exercise 1 - Adding a second coordinate grid and a second inset map</h2>
<ol type="1">
<li>Now add a coordinate grid to the Overview map. following the same steps as you did for the main map, but with the following changes:</li>
</ol>
<ul>
<li><p>Instead of the OSGB CRS, use WGS84 as the CRS, so that the coordinates are in degrees (to determine ‘where in the world’ somewhere is, degrees make more sense than meters). To do that, manually pick <code>EPSG:4326</code> as the <code>CRS</code> on the <code>Map Grid Properties</code> of the new grid.</p></li>
<li><p>Use <code>Frame and Annotations Only</code> as for the Main Map, but this time we want coordinates and ticks just on the top and right of the map. So under the <code>Frame</code> options uncheck the <code>Bottom side</code> and <code>Left side</code> boxes, and on the <code>Draw Coordinates</code> section, change the first option of <code>Bottom</code> and <code>Left</code> from <code>Show all</code> to <code>Disabled</code>.</p></li>
<li><p>Make the font size <code>8</code>, make the coordinates on the right <code>Vertical Descending</code>, and get rid of the unnecessary decimal places (i.e.&nbsp;the zeroes).</p></li>
<li><p>Set the Overview map <code>Frame</code> option to on.</p></li>
</ul>
<p>The final Overview map should look like this:</p>
<p><img src="images/lab_8/lab8_fig18_overview_map_coords.jpg" class="img-fluid"></p>
<ol start="2" type="1">
<li>Now add a second inset map showing the aerial photo view of the castle. Follow the steps used for the Overview map, with the following changes:</li>
</ol>
<ul>
<li><p>Create a third theme on QGIS, where only the air photo is visible, and name it <code>Close Up</code>.</p></li>
<li><p>Add a new map frame in the space left between the Overview map and the Legend, rename it from <code>Map 3</code> to <code>Close Up</code>, and set it to follow the <code>Close Up</code> theme.</p></li>
<li><p>Adjust this inset map scale to show all of the castle as close up as possible. Aroubnd 15000 should work well.</p></li>
<li><p>Do not add a coordinate grid to this map inset, but do add a Scale Bar. To make the scale relative to the <code>Close Up map</code>, create the scale bar then go to its <code>Item Properties</code>, and on the first option called <code>Map</code>, make sure it is set to <code>Close Up Map</code>. Make the scale only one segment long, and place it within the close up image.</p></li>
<li><p>Add a small text below the Close Up Map, saying <code>Aerial View of Bamburgh Castle</code>.</p></li>
</ul>
<p>Your final map should look like this:</p>
<p><img src="images/lab_8/lab8_fig21_done.jpg" class="img-fluid"></p>
</section>
<section id="independent-exercise-2---exporting-your-map" class="level2" data-number="8.8">
<h2 data-number="8.8" class="anchored" data-anchor-id="independent-exercise-2---exporting-your-map"><span class="header-section-number">8.8</span> Independent Exercise 2 - Exporting your map</h2>
<p>Your map is done! Now all is left is to export it. Your main choices are to export it as an <em>image</em> (to add it in a report or similar), or as a <em>PDF</em> if you want the map to be a standalone file.</p>
<ul>
<li><p>To export as an image, on the Layout Editor window go to <code>Layout &gt; Export as Image...</code>. Pick a folder and file name to save it, and then it will show you some options. You can normally use the default options, or check the <code>Crop to Content</code> box if you want your image edges to cover only the content of the map (i.e.&nbsp;no white margins).</p></li>
<li><p>To export as a PDF, go to <code>Layout &gt; Export as PDF...</code>. Pick a folder and file name to save it, and then it will show you some options as well. The defaults are fine for most cases.</p></li>
</ul>
<p>Well done! You havemade a very complex and (arguably) nice looking map! You are now ready to take on the first module Assessment, and make a beautiful map showing the not-so-beautiful issue of deforestation in the Amazon.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./lab_carto_1.html" class="pagination-link" aria-label="Lab 7: Making Maps - Part I">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Lab 7: Making Maps - Part I</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./sec_w5_spatial_analysis_I.html" class="pagination-link" aria-label="Week 5 - Spatial analysis I">
        <span class="nav-page-text">Week 5 - Spatial analysis I</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>