[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "GEOU9SP GIS Workbook",
    "section": "",
    "text": "Welcome!\nThis e-book was created as a lab companion for the GEOU9SP - Geographic Information Systems module at University of Stirling. It contains all the practical exercises that will be covered throughout the module.\nThis book is not a replacement to Canvas, so make sure you are engaging with the material on Canvas on a weekly basis!\nThe content of this book is organised into sections, which will correspond to the teaching weeks and practical lab sessions. You will always see the main content in the center window, with a detailed menu covering all entries in the book on the left, and a chapter-specific table of contents on the right. The Canvas pages for each lab session will always link to the corresponding chapter in this book.\nA PDF version of this book can be downloaded here.\nIf you have any questions follow the instructions on Canvas on how to contact the module coordinator.",
    "crumbs": [
      "Welcome!"
    ]
  },
  {
    "objectID": "sec_w1_intro_toGIS.html",
    "href": "sec_w1_intro_toGIS.html",
    "title": "Week 1 - Introduction to GIS",
    "section": "",
    "text": "ILOs covered",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w1_intro_toGIS.html#ilos-covered",
    "href": "sec_w1_intro_toGIS.html#ilos-covered",
    "title": "Week 1 - Introduction to GIS",
    "section": "",
    "text": "Understand the structure of spatial data and choose appropriate data types and models for storing and representing it;\nObtain and assess the quality of spatial data from online and offline sources and produce new spatial data using computer and field methods;\nCreate map visualisations that adhere to cartographic principles and can be easily and unambiguously interpreted by the non-specialist public;",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w1_intro_toGIS.html#what-will-you-learn",
    "href": "sec_w1_intro_toGIS.html#what-will-you-learn",
    "title": "Week 1 - Introduction to GIS",
    "section": "What will you learn",
    "text": "What will you learn\nFor every week, we will list the main theoretical and practical learning goals. Use these as a ‘checklist’ to gauge your learning for each week. If you don’t feel confident you have learned any specific topic, then revisit the week’s material!\n\nTheoretical knowledge for Week 1:\n\nWhat are Geomatics, GIS, Remote Sensing and associated terms and fields?\nWhat is spatial data?\nWhat is a datum?\nWhat is a map projection?\nWhat is a Coordinate Reference System?\n\n\n\nPractical knowledge:\n1  Lab 1: QGIS overview and file management\n\nHow to launch QGIS\nHow to load a spatial data file\nHow to navigate the main QGIS interface\nHow to identify features\nHow to do basic measurements\nHow to do basic styling of spatial data\nHow to enter the layout editor\nHow to make and export a simple map layout\n\n2  Lab 2: Coordinate Reference Systems\n\nHow to check the Coordinate Reference System of a spatial file\nHow to set the CRS of a QGIS project\nHow to set the CRS of a spatial file when it is already known.\nHow to reproject(convert) a spatial file from one CRS to another\nWhat are the main CRSs you should be familiar with.",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "lab_intro.html",
    "href": "lab_intro.html",
    "title": "1  Lab 1: QGIS overview and file management",
    "section": "",
    "text": "1.1 Before you start!",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Lab 1: QGIS overview and file management</span>"
    ]
  },
  {
    "objectID": "lab_intro.html#before-you-start",
    "href": "lab_intro.html#before-you-start",
    "title": "1  Lab 1: QGIS overview and file management",
    "section": "",
    "text": "Go through the Week 1 preparatory session on Canvas, and watch the seminar recording if you have missed it.\nRead this document to understand how the British National Grid indexing system works.",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Lab 1: QGIS overview and file management</span>"
    ]
  },
  {
    "objectID": "lab_intro.html#GE1",
    "href": "lab_intro.html#GE1",
    "title": "1  Lab 1: QGIS overview and file management",
    "section": "1.2 Guided Exercise 1 - Managing and loading files",
    "text": "1.2 Guided Exercise 1 - Managing and loading files\nIn this exercise, you will download some data, prepare a folder structure to organise the files in your GIS projects, then create a QGIS project file and add some GIS data to it.\n\n1.2.1 Downloading the required data\nFor this practical you will use the “OS open road” and “OS Terrain 50 Digital Terrain Model” spatial datasets, specifically for the NS89 tile of the Ordnance Survey British National Grid. (Read about what these datasets are here: OS Open Roads , OS Terrain 50).\n\nHead to the Digimap website, and if you haven’t already, make sure you accept the user licenses for all datasets, as show on the instructions video avaiable on Canvas.\nGo the Ordnance Survey section of the site, and then pick the View maps and download data option on the right.\nFollowing the steps shown on the instructions video, download the following datasets for the NS89 BNG tile only:\n\n\nOS Open Roads (under Vector Data)\n“OS Terrain 50 Digital Terrain Model” (NOT Terrain 5 and NOT Contours!, under Land and Height Data)\n\nIf you have correctly searched for tile NS89 and checked the required datatsets, you will see a screen like this:\n\n\n\n1.2.2 Creating a project structure\nGIS projects generate a lot of different files, and quickly, so project organization is essential. The folder structure below is my personal suggestion for organizing GIS projects files and associated data. As you get comfortable managing your own projects, feel free to change the organization structure to something that best suits your own workflow and the specific project you are working on!\n\nCreate a folder on your computer with the module name (GEOU9SP), off of your main work folder. For Windows this will usually be Documents. For Linux and Mac, create it on you home folder. (If you prefer and are comfortable with saving at another location on your computer, go for it!)\n\nWindows:\n\nmac OS:\n\n\n\n\n\n\n\nWarning\n\n\n\n\nHaving complex file paths can sometimes create problems. That is why we try to keep our main projects on a base folder. If you would like to keep a copy of your data on your OneDrive folder you are encouraged to do so, but I don’t recommend working directly from it. That is because the full path to a OneDrive folder will to be very long and likely contain spaces. Mine, for example is C:\\Users\\Thiago\\OneDrive - University of Stirling\\Documents. Those spaces in the name may create problems later. So I recommend instead to copy the completed lab data to your OneDrive folder at the end of each lab.\nFor the same reason, never use spaces or special symbols on your folder and file names. Limit yourself to using letters A-Z and a-z, numbers 1-9 and just the underline (_) and dash (-) symbols.\nWindows does not differentiate letter case, so if you create a file named filename1.txt and then a second file named Filename1.txt in the same folder, the second will overwrite the first. Mac OS does differentiate upper and lower case letters, so Filename1.txt and filename1.txt are considered different names and can co-exist in the same folder.\n\n\n\n\nInside the new GEOU9SP folder, create a subfolder called lab_1 (notice I am avoiding spaces by using the underline)\nInside lab_1, create the following folder structure. On the diagram below, the folder raster is a folder inside the folder 01_raw_data, which is inside lab_1 and so on.\n\n.\n└── GEOU9SP/\n    └── lab_1/\n        ├── 00_qgis\n        ├── 01_raw_data/\n        │   ├── raster\n        │   └── vector\n        ├── 02_processing\n        ├── 03_final_products\n        └── 04_notes\nI like to start folder names start with double digits so they are kept in order. These folders will be used as follows:\n\n00_qgis: we will use this folder to save our QGIS project files.\n01_raw_data: this folder will keep all the original data files you download. This way you can always go back to the start if something goes wrong. You can optionally use the subfolders vector and raster to easily know which kind of data you are working with, but this may not be necessary for small projects. As you obtain data you will create additional subfolders for each individual dataset to keep data organized.\n02_processing: here we will keep all the intermediate files you generate as part of your work. Make ample use of subfolders to identify each step of the workflow.\n03_final_products: here we will keep the final products of our intended analysis. This makes it easy for us to find the latest version of our final results, without risking confusing it with intermediate files. This can also include maps, reports and any other ’deliverable’resulting from your analysis.\n04_notes: here we will keep all our non-GIS files. For example, it may be a good idea to keep a text file documenting the project steps as you work on it. You could also save here screen grabs of specific steps. Again, use subfolders as needed to keep your data tidy.\n\n\nNow move the data you’ve downloaded into your organized project folders and extract (unzip) them if necessary. The terrain data folder (terrain-50-dtm_xxxxxxx) should go into the raster folder within 01_raw_data and the roads folder (open-roads_xxxxxxx) into the vector folder. The citations_orders.xxxx.txt and contents_order_xxx text files should go into your 04_notes folder. Your folder structure should look like this:\n\n.\n└── GEOU9SP/\n    └── lab_1/\n        ├── 00_qgis\n        ├── 01_raw_data/\n        │   ├── raster/\n        │   │   └── OS_terrain_50/\n        │   │       └── ...\n        │   └── vector/\n        │       └── OS_roads/\n        │           └── ...\n        ├── 02_processing\n        ├── 03_final_products\n        └── 04_notes\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat are the citations_orders.xxxx.txt and contents_order_xxx files? What information do they contain?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nThey are both plain text files. citations_orders.xxxx.txt is very handy as it gives us the proper way to cite the data sources on reports. contents_order_xxx is just a summary of your Digimap order.\n\n\n\n\nStart a new text file (a Word .doc file or a Notepad .txt file) in your 04_notes folder, and write a few lines documenting the steps you took until now. If you prefer handwritten notes on a paper notebook, feel free to use it instead! The important thing is to keep track of the steps you are taking. As projects get more complicated, it is easy to forget which steps we took, and in what order!\n\n\n\n1.2.3 Creating a QGIS project and adding data to it\nA QGIS project is a file, which will remember all the data layers you have loaded, their stacking order, the styling of each layer, and some other information such as the coordinate reference system. It will also keep any map layouts that you create. But he project file will NOT store the data files themselves!!. It will only link to the data. That is why we need good project folder organisation. If a data file is moved or renamed, the QGIS project file will lose track of it.\n\nCreate a new project in QGIS by clicking on Project &gt; New... or pressing Ctrl-N:\n\n\n\nAdd to your project the layers NS_RoadLink.shp from the OS Roads dataset and the NS89.asc terrain data from your organized project folders.\nSave your project inside the 00_qgis folder. You can save your project by clicking on the Save button, going to Project &gt; Save menu, or by holding the keys Ctrl+S (Command+S on Mac).\nOpen the project settings by clicking on the menu Project &gt; Properties.... You will then see this window:\n\n\n\nThe main things to set on your new project are the project home folder, the coordinate reference system (CRS) and the measurement units.\n\nAs the project home on the General tab, select the lab_1 folder you created. This helps quick navigation when opening and saving data.\nFor measurement units, make sure distance units are set in meters, and area units in squared meters, also on the General tab. Any QGIS operations that calculate distances or areas will use the units set by the project.\nFor the CRS, go to the CRS tab and search for 27700 in the Filter box. That is the EPSG code that identifies the OSGB 1936 British National Grid coordinate reference system (CRS). Select it by clicking on it.\n\n\n\n\n\n\n\n\nNote\n\n\n\nEPSG stands for “European Petroleum Survey Group”, and designates a database with standard codes for hundreds of coordinate reference systems. Over time, you will probably memorize the EPSG codes for the CRSs you use more often.\n\n\n\nSave your project again.",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Lab 1: QGIS overview and file management</span>"
    ]
  },
  {
    "objectID": "lab_intro.html#guided-exercise-2---organizing-and-styling-your-layers",
    "href": "lab_intro.html#guided-exercise-2---organizing-and-styling-your-layers",
    "title": "1  Lab 1: QGIS overview and file management",
    "section": "1.3 Guided Exercise 2 - Organizing and styling your layers",
    "text": "1.3 Guided Exercise 2 - Organizing and styling your layers\nOne of the most powerful aspects of GIS software is the ability to style spatial data in very specific ways, by specifying colors, line widths, line types, simbols, etc. As we progress in the module you will learn more and more ways to style your data.\n\nOn the Layers panel to the left of the screen, select the NS89 layer, and drag it to the bottom of the layers list if not there already.\nTurn the roads layer off for now, by unchecking the box besides its name.\nRight-click on the NS89 layer name and choose Rename Layer. Rename it to Digital Elevation Model (50m).\nOpen the file explorer in your system, and find the NS89.asc file that holds the actual elevation data, which you downloaded from Digimap.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWill changing a layer name in the layer panel also change the name of the source data file for that layer?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nNo, layer names within the project are independent of file names - but as default QGIS will use the file name as layer name when you add new data. But you should always change them into nice, readable and properly spelled names within your project, where you are free to use spaces. The actual file name linked by the project will stay the same and can always be seen by right-clicking on the layer name and selecting Properties...&gt; Information.\n\n\n\n\nRight click on the newly renamed terrain layer and choose Zoom to Layer. This is a very handy tool to “find yourself” if you end up zooming or panning the map too far.\nRight click on the terrain layer name again and select Properties..., then go to the Symbology tab.\nOn the Min and Max boxes, type 0 and 500 respectively. This determines the range of layer values to be visualised.\nSelect Rendering type to be Single Band Pseudocolor, and change the Color ramp option by clicling on the down-arrow button to the right and picking the spectral colour ramp. If you click on the colour ramp itself it will open a new window to custmize it. This is now what we need for now, so just close it and use the down-arrow.\nClick on Classify (under the dropdown menu that says * Mode: continuous*). The colours will be matched to the range of elevation values in the layer.\nClick again on the down-arrow button and select Invert Color Ramp at the top of the options, so that the lowest heights are coloured blue. Then click on OK.\nNote how the legend for you terrain layer has changed on the Layers panel. it now shows the minimum and maximum elevations and the colour ramp. Save your project.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhy do we bother inverting the colour ramp for this dataset?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nWe should always try to use colours that reinforce map interpretation. The color blue is usually associated with water, and water accumulates on the lowest elevations, so setting the lowest elevations to blue helps map users read and interpret the map.\n\n\n\n\nRename the NS_RoadLink layer to Road Network.\nGo to its Symbology properties, like you did for the terrain layer, Notice that the symbology options are data-specific (vector vs. raster). Seclet Simple Line in the symbology window (under the main Line option). Then under the window, go to the Color option an click on the down-arrow menu to change the line color to a dark grey. If you click on the actual colour, a more complex colour-picking window will appear. You can use either the quicker colour dropdown or the main colour window, whatever you prefer.\nChange the Stroke width (line width) to 0.3. Click OK. Reactivate the layer if needed to visualise it.",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Lab 1: QGIS overview and file management</span>"
    ]
  },
  {
    "objectID": "lab_intro.html#guided-exercise-3-processing-data-using-gis-operations",
    "href": "lab_intro.html#guided-exercise-3-processing-data-using-gis-operations",
    "title": "1  Lab 1: QGIS overview and file management",
    "section": "1.4 Guided Exercise 3: Processing data using GIS operations",
    "text": "1.4 Guided Exercise 3: Processing data using GIS operations\nThe core of GIS work is to use the many built-in operations (also known as functions or tools) of GIS software to process the data in some way, and thus create additional information. For this exercise, we will use an operation that creates a new layer representing the boundaries of the terrain data layer, and then use a second operation to cut the roads layer to the same shape and extent as this new layer.\n\nGo to the Vector menu and select Research Tools &gt; Extract Layer Extent.... Select the terrain layer as your Input layer, and click Run to generate a temporary layer. Temporary layers are not kept once you close QGIS, unless you save it manually later. The Extract Layer Extent window will not close automatically after you run the operation, so click on Close when you are done.\nGo to Vector &gt; Geoprocessing Tools &gt; Clip.... Select the roads layer as the Input Layer and the new temporary layer as the Overlay Layer.\nThis time, we will save the output. Click on the ... button to the right of the Clipped text box, and then choose Save to file. Save your new layer on the folder GEOU9SP/lab_1/02_processing/, naming it clipped_roads.shp. Make sure the SHP file format is selected below the file name. Then click on Run to execute the operation. Close the window.\nTurn the original roads layer on and off to see the result of your operation. Then right-click on the original roads layer, and select Styles &gt; Copy Style &gt; All Style Categories. Then right click on the new (clipped) roads layer and select Styles &gt; Paste Style &gt; All Style Categories. This is a great way top style several layers ion the same way wirthout effort.\nRemove the original roads layer from your project by right clicking on it and selecting Remove Layer..., and then rename you clipped layer to “Roads”. Save your project.\nClose QGIS. It will give you a warning - read it carefully and then confirm it.\nReopen QGIS, and load back your project. Notice it remembers exactly where you last saved it, including zoom level, layer names and layer styles. The “Extent” layer will still be on your list, but will appear empty - it has been deleted once you closed QGIS. Remove it from the project and save again.\n\n\n\n\n\n\n\nStop and Think\n\n\n\n\nWhat are the names of the two GIS functions you just used in this exercise?\nWhy did you have to create a new layer representing the extent of the terrain data before clipping the roads layer?\nWhat does the warning given by QGIS when you closed your project means?\n\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nThe functions are called Clip and Extract Layer Extent.\nThe Clip function requires two vector files as input, but the terrain data is a raster file (i.e. an image). The Extract Layer Extent creates a vector file representing the extent of any given layer. Each specific tool will require different kinds of data to work properly. We will learn more about vectors and rasters on weeks 2 and 3.\nWhen we created the extent layer, we produced a temporary layer, which is discarded by QGIS when the program is closed. QGIS was letting you know that will happen, to give you the chance to go back and save it. Temporary layers are also lost when QGIS crashes (yes when, not if - it will happen). So never use them for important stuff - only for quick tests if you are not sure what the output of a function will be.",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Lab 1: QGIS overview and file management</span>"
    ]
  },
  {
    "objectID": "lab_intro.html#guided-exercise-4-creating-a-map-layout",
    "href": "lab_intro.html#guided-exercise-4-creating-a-map-layout",
    "title": "1  Lab 1: QGIS overview and file management",
    "section": "1.5 Guided Exercise 4: Creating a map layout",
    "text": "1.5 Guided Exercise 4: Creating a map layout\nThe main QGIS interface (or any other GIS software) is developed and optimised for interactive work. But very often as part of our GIS analysis we will want to generate nice maps and figures following proper design rules (and not just grabbing a screen capture of the QGIS window and dumping it on a page - hint for your assignment reports). For that, we use the QGIS Map Layout Editor.\n\nClick on Project &gt; New Print Layout and name it Lab 1 Layout. A new window will open showing the QGIS Layout Editor. Notice that the main QGIS window remains open as well. These windows are ‘linked’, so that the map layout reflects any styling changes you make on the main window.\nAdd a new map to the layout by clicking on the  icon. Drag it through the page so it covers about 2/3 of it horizontally, and the full height of the page (minus some borders).\nUse the Interactive Extent tool  to pan (click and grag) and zoom (mouse wheel) until your data covers the entire map box. But make sure you don’t hide the edges of the data by zooming in too much!\nNow fine tune the map scale by changing the Scale value on the bottom right panel. Remember that this value means “1:value”, i.e. one unit on the page is equal to that many units (value) in the real world. This means larger numbers will “zoom out”, and smaller numbers will “zoom in”. Try to make the map fill as much as possible of the map box, without clipping the edges.\nGo to the menu Add Item &gt; Add Legend... in the Map Layout Window (or guess the icon for this option on the side toolbar). Click the area beside the map box and drag to add a legend.\nGo back to the main QGIS window, right click on the terrain layer name, then select Properties..., and on the Symbology tab, change the Mode under the class color box to Equal Interval. Then select the number of Classes to 10 (to the right of the Equal Interval box). Go back top the Map Layout editor.\nGo to the menu Add Item &gt; Add Scalebar in the Map Layout Window (or guess the icon for this option on the side toolbar). Click and drag in the area below the legend to add it to the map layout.\nAdd a title to your map using the Add Label... tool (either on the Add Item menu or selecting the tool directly from the left sidebar). You can change the text by replacing the “Lorem ipsum” placeholder text with your own text on the left pane. Try to make it bold with a font size of 16 (hint: always use the down-arrow buttons for ‘quick settings’).\nRearrange the items on the page until you are pleased with the results. Then go to Layout &gt; Export as PDF..., and export your map, naming it properly and saving it on GEOU9SP/lab_1/final_products. It is a good idea to export as PDF if you want your map to be a standalone document. If you are exporting to insert the map into a report, then use Layout &gt; Export as Image... instead.\n\nFor reference, my map looked like this at this stage:\n\n\nThen close the Map Layout window, save your project on the main QGIS window, and close QGIS. Reopen QGIS, and go to Project &gt; Layout Manager. The layout you created previously should appear on the list. Select it and click on Show to reopen the Map Layout window.\n\nCongratulations! You have successfully finished your first GIS project, using proper file management practices! As a final suggestion, create a “workflow_notes” file on GEOU9SP/lab1/notes and write up a quick overview of what you did, along with any specific notes you would like to remember later.",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Lab 1: QGIS overview and file management</span>"
    ]
  },
  {
    "objectID": "lab_intro.html#independent-exercise-1",
    "href": "lab_intro.html#independent-exercise-1",
    "title": "1  Lab 1: QGIS overview and file management",
    "section": "1.6 Independent Exercise 1",
    "text": "1.6 Independent Exercise 1\nAt the end of each lab, you will have the opportunity to reinforce what you learned by going through ‘independent’ exercises. These will use the same operations you learned with the guided exercises, but it may require you to figure out small bits of new functionality, and will not have step by step instructions.\nAs the module progresses, the independent exercises will give you less and less directions, to reflect real-world GIs usage. Make sure you do the independent exercises - it is easy to fall into a false sense of ‘I got this’ when only following step-by-step directions.\n\nCreate a new project folder structure for this project, under your main GEOU9SP work folder.\nDownload the zipfile containing the Air Photo Mosaic and the Stirling Council Geospatial Data from here.\nExtract the data from the zipfiles and move them to the proper project folders.\nOpen QGIS and create a new project that uses the OSGB British Grid (EPSG 27700) coordinate reference system.\nImport the airphoto raster image and the vector files for Buildings, Roads, Railway Track, Electricity Transmission Lines, and Functional Sites into your QGIS project.\nOrganize your layers so that, from top to bottom, you have transmission lines, railways, roads, buildings, functional sites, and then the airphoto image.\nStyle your layers so that transmission lines are styled as thin dashed red lines, railways as thick white lines, roads as thick grey lines, buildings as filled yellow polygons and functional sites with a thick dark blue outline and no fill colour (hint: check the Fill style options).\nClip all your vector layers to the extent of the airphoto image.\nCreate a map layout covering the entire extent of the airphoto. Add a title, legend and scale bar to your layout and export it as a PNG image. Then insert your exported file as a figure into a MS Word document.\n\n\n\n\n\n\n\nClick here to see what the final layout should look like.\n\n\n\n\n\n\n\n\n\n\nNow answer the questions below:\n\n\nHow far is the Pathfoot Building from the Cottrell Bulding? Calculate it both “as the crow flies” (linear distance) and as if you were walking. (Hint: use the Measuring tool).\nWhat is the total surface area of the water bodies in the University of Stirling Campus? (Hint: also the Measuring tool).\nWhat is the classification of the UoS campus polygon within the “Functional Site” layer? (Hint: use the Indentify Features tool).",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>1</span>  <span class='chapter-title'>Lab 1: QGIS overview and file management</span>"
    ]
  },
  {
    "objectID": "lab_crs.html",
    "href": "lab_crs.html",
    "title": "2  Lab 2: Coordinate Reference Systems",
    "section": "",
    "text": "2.1 Guided Exercise 1: Understanding Coordinate Reference Systems\nIn this exercise, you will learn how to use QGIS to identify the coordinate reference system (CRS, sometimes wrongly called as just “projection”) of spatial data you acquire, and also how to manage data and project coordinate reference systems.",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Lab 2: Coordinate Reference Systems</span>"
    ]
  },
  {
    "objectID": "lab_crs.html#guided-exercise-1-understanding-coordinate-reference-systems",
    "href": "lab_crs.html#guided-exercise-1-understanding-coordinate-reference-systems",
    "title": "2  Lab 2: Coordinate Reference Systems",
    "section": "",
    "text": "Stop and Think\n\n\n\nWhy are coordinate reference systems and ‘projections’ not the same thing?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nCoordinate reference systems combine a datum, which defines a geometric representation of the Earth’s shape and how it ‘intersects’ with the real surface of the Earth, a coordinate system (for example latitude and longitude or northings and eastings) and a map projection which is a set of mathematical rules to project the 3D surface of the datum’s ellpisoid into a flat plane (such as a screen or a map).\n\n\n\n\n2.1.1 Obtaining the required data\n\nDownload the 2020 country boundary data in GeoJSON format, at the 1:20 million scale, from the link below. The GeoJSON format is a more recent GIS file format, commonly used for web-based mapping. It is derived from the JavaScript Object Notation (JSON) data file format, widely used to exchange data among websites and web servers. More info here.\n\nhttps://ec.europa.eu/eurostat/web/gisco/geodata/administrative-units/countries\n\n\n\n\n\n\n\nStop and Think\n\n\n\n\nWhat is the source of the data you are downloading? Does it seem reliable?\nWhat are the conditions (provisions) of use for the data?\n\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nThe page providing the data is managed by Eurostat, the statistical office of the European Union. Therefore you would be inclined to trust in the quality and correctness of the data provided.\nThe webpage presents a link to “dowload rules’ which describe the authorised uses of the data. This informartion can also be found in the data’s metadata file.\n\n\n\n\n\nCreate a lab_2 folder in your GEOU9SP main folder. Then create a simple folder structure to organise the data, and extract the zipped downloaded data in its proper location. If you are not sure how to do this, please revisit Chapter 1.\nOpen QGIS and start a new project. Save it as lab_2 in its proper folder. Then look at the contents of the folder holding the country data, using the QGIS browser panel. If the panel is not available, you can enable it by going to the View &gt; Panels menu and checking the box for browser. You should see several layers on tghe folder:\n\n\n\nLoad the CNTR_BN_20M_2020_4326 file into your project. Pay attention to the file name as there are many files with similar names.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nGood file names are always informative of their content. Can you gess the contents of the different GeoJSON files you have downloaded based on their names?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nAll file names start with CNTR for ‘countries’, followed by a two letter code. BN seems to stand for ‘boundary’(vector lines), RG for ‘region’(vector polygons), and LB for ‘labels’ (vector points). Then 2020 specified the reference year, and 20M indicates the 1:20 million mapping scale. the final four-letter number indicates the EPSG code for the data CRS: 4326 (‘unprojected’ WGS84), 3857 (WGS 84 with Pseudo-Mercator projection) or 3035 (ETRS89-extended / Lambert Azimuthal Equal Area for Europe).\n\n\n\n\n\n2.1.2 Visualising data with different CRS\n\nSet the symbology for the outline and fill as you prefer. Try to manipulate more visual variables than just colour.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhy can’t you set a fill color for the countries?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nBecause the BN files are vector lines, not polygons. Lines only have one dimension, and thus the inner parts of the countries in this dataset are actually empty. If you load the RG dataset instead, you can set the fill, as vector polygons represent 2D areas.\n\n\n\n\nRight-click on this layer’s name and go to Properties &gt; Information.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat is the Coordinate Reference System (CRS) for this dataset?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nThe information tab will have a section called Coordinate Reference System, as below:\nName: EPSG:4326 - WGS 84 Units: Geographic (uses latitude and longitude for coordinates) Type: Geographic (2D) Method: Lat/long (Geodetic alias) Celestial Body: Earth Accuracy: Based on World Geodetic System 1984 ensemble (EPSG:6326), which has a limited accuracy of at best 2 meters. Reference: Dynamic (relies on a datum which is not plate-fixed)\n\n\n\n\nNote, on the bottom QGIS status bar, that as you move your mouse pointer around, the coordinates for the mouse position are updated in real time. Also note what the map scale is, how it changes as zoom in and out. You can also type the second part of a scale nuber to zoom at the desired map scale (for example 50000 if you want to see the map at a 1:50000 scale)\n\n\n\n\n\n\n\n\nStop and Think\n\n\n\n\nWhy doesn’t the scale shown on the bar match the “advertised” scale for the dataset (1:10 million)?\nThe box on the very bottom right of the QGIS status bar tells you what is the current project CRS. How is it different from a layer CRS?\n\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nThe 20M scale refers to the scale used when digitising the coastline, i.e., what is the ‘closest’ you can view the dataset without loss of detail.\nThe project CRS defines the ‘viewing’ CRS for the map canvas. Any data that uses a different CRS than the project will be re-projected ‘on the fly’ to match the CRS of the project - but continue with the exercise to learn why that can be a problem.\n\n\n\n\n\nZoom to the UK in the shown layer. Note how the scale at the bottom status bar changes with your zoom.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nDoes the shape of the UK look “right” to you? If not, what is the issue and what is the cause?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nThe UK looks ‘squished` vertically. That is because the data is being viewed in the EPSG 4326 (’unprjected’ WGS84) CRS. EPSG 4236 uses what is effectively the Plate Carrée or Equidistant cylindrical projection, the simplest possible map projection - lat and long degrees are just linearly converted to x,y coordinates. This projection does not preserve area nor shape (conformal) and increasingly distorts features as you approach the poles.\n\n\n\n\nClick on the project projection box at the bottom right of the status bar (or go to Project &gt; Properties... &gt; CRS tab). On the Filter text box, search for EPSG:3035. Select this projection for the project and click OK. A warning box will appear, make sure you read it through before selecting OK again.\n\n\n\n\n\n\n\nStop and Think\n\n\n\n\nwhat is the name of the Coordinate Reference System specified by EPSG 3035?\nWhat did the warning window warned you about?\n\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nEPSG 3035 is called ETRS89-extended / LAEA Europe and is the official projection for cartographic data from the European Union. It uses the European Terrestrial Reference System 1989 datum and the Lambert Azimuthal Equal Area projection, which preserves areas and can be considered conformal for Europe.\nIt warned you that there is more than one option for the ‘on the fly’ reprojection of your layer from ESPG 4326 to EPSG 3035. It showed you the options with the most accurate (1m) selected by default. But this option is only valid for Europe.\n\n\n\n\nIt is important to not “freak out” when an unexpected warning or error appear. Take a breath, and read through the window or error message, most often the explanation is right there. You just have to dare to look.\nIf you did click through it without looking, here is a screen capture of it:\n\n\nLook at the shape of the UK again after changing the project CRS. Then right click on the layer name and select “Zoom to Layer(s).”\n\n\n\n\n\n\n\nStop and Think\n\n\n\n\nHow does the rest of the world look now? Why?\nWhen you move your mouse, what unit are the coordinates in?\n\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nAs you move further away from the centre of the projection, shape gets progressively more distorted. This is because the LAEA projection is only conformal at its centre. But areas are all correct.\nIn metres. You can check that on the layer’s Properties &gt; Information tab.\n\n\n\n\n\nNow add to the project the file called CNTR_BN_10M_2020_3035.geojson. Notice the different last four numbers on the file name.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat is the CRS for this new layer, and how well dos it visually align with the p[revious layer.\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nThis second layers uses the EPSG 3035 CRS, while the previous layer used EPSG 4326. Notice how ech layer maintains its original CRS when added to the project, but if necessary they are reprojected ‘on the fly’ to match up visually.\n\n\n\n\nChange the project CRS back to EPSG:4326.\nNow go back to the project CRS properties and check the box that says No CRS at the top of the window. This disables the on-the-fly projection. Then click OK and go back to your map.\nRight click on the 4326 layer and select Zoom to Layer. Then select the zoom out tool (the loupe with a minus sign) at the top button row, and start clicking at the centre of the map. Keep clicking as it gets really smalll - you should click about 17 times until the second dataset is fully visible. Check the properties of each layer to make sure they still have the same CRS of when you loaded them.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat has happened? Why are the two datasets suddenly very different in size?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nSince you turned off on-the-fly reprojection, each dataset is now drawn at their original coordinates - but one is in meters and the other in degrees, so their x,y positions and scale become very different.\n\n\n\n\n\n2.1.3 Potential issues with using mismatched data\n\nDownload this vector shapefile (link), unzip it and add it to your QGIS project. Check what is the CRS of this layer.\nSet the Project CRS back to EPSG:3035. Then go to the top menu bar and select Vector &gt; Geoprocessing &gt; Clip. Select the layer that has the EPSG 3035 projection as your Input Layer, and the new “clip_bounds” layer as your Overlay Layer. You can just leave the output as a temporary file. Click Run.\nTurn off the visibility of all layers except the new “Clipped” layer to see the result of the Clip operation.\nRename the “Clipped” layer to “Clipped_3035” by right clicking on it and selecting Rename layer. Then repeat the Clip operation, this time selecting the 4326 world layer as Input, and “clip_bounds” as Overlay again. Rename the result to “Clipped_4326.”\n\nUsing what you learned on the previous lab activities, pick two contrasting colours for each “Clipped_…” layer, and make the lines thicker. Zoom in at the lines of each clipped layer and check if they overlap perfectly.\n\n\n\n\n\n\nStop and Think\n\n\n\nWhy are the clipping results different even though the initial 3035 and 4236 layers looked perfectly aligned?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nBecause although they have been reprojected visually to match on screen, the files still have different CRSs, and this affects the lining up of the Input and overlay layers. To get proper results, you need permanently translate (reproject) both datasets to the same CRS.\n\n\n\n\nNow go to Vector &gt; Data Management Tools &gt; Reproject Data. Select the 4326 world layer as your Input Layer, and EPSG:3035 as your Target CRS. Let the result be a temporary file and click OK. The new layer will be automatically named as “Reprojected”. What is the CRS of this new layer (check on the layer properties window)?\nNow repeat the use of the Clip tool using “Reprojected” as the Input Layer and “clip_bounds” as the Overlay Layer. Rename the resulting layer to ‘Clipped_Reprojected’. Which of the two originally clipped layers (“Clipped_3035” or “Clipped_4236?) better matches the”Clipped_Reprojected” layer?\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat does the Reproject operation do?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nIt actually applies a permament mathematical transformation to the coordinates of the input data, translating the data from one CRS to another. For any GIS project that involves multiple data layers with different CRSs, you should pick the CRS that makes more sense for your project as the ‘project CRS’, and then reproject all layers to the same CRS before anything else.\n\n\n\nThis is the end of Lab 2! You shoudl now understand why different datasets may have different Coordinate Reference Systems, what are the problems with working with data that has mismatched CRSs, and how to reproject data to match a given CRS. As this is your first week, there are no additional independent exercises - lets take it easy!\nIf you still want to practice more, check the exercises from the QGIS Training Manual!",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>2</span>  <span class='chapter-title'>Lab 2: Coordinate Reference Systems</span>"
    ]
  },
  {
    "objectID": "sec_w2_vectors.html",
    "href": "sec_w2_vectors.html",
    "title": "Week 2 - Working with vector files",
    "section": "",
    "text": "ILOs covered",
    "crumbs": [
      "Week 2 - Working with vector files"
    ]
  },
  {
    "objectID": "sec_w2_vectors.html#ilos-covered",
    "href": "sec_w2_vectors.html#ilos-covered",
    "title": "Week 2 - Working with vector files",
    "section": "",
    "text": "Understand the structure of spatial data and choose appropriate data types and models for storing and representing it;\nObtain and assess the quality of spatial data from online and offline sources and produce new spatial data using computer and field methods;\nPlan and execute GIS analytical steps to solve spatial problems successfully;",
    "crumbs": [
      "Week 2 - Working with vector files"
    ]
  },
  {
    "objectID": "sec_w2_vectors.html#what-will-you-learn",
    "href": "sec_w2_vectors.html#what-will-you-learn",
    "title": "Week 2 - Working with vector files",
    "section": "What will you learn",
    "text": "What will you learn\nUse this list as a ‘check-list’ to gauge your learning for each week. If you don’t feel confident you have learned any specific topic, then revisit the week’s material!\n\nTheoretical knowledge for Week 2:\n\nWhat are data models vs data formats (file formats) vs data types (attribute types)?\nWhat is the vector data model?\n\nHow are vectors represented?\nWhat are the components of a vector file (geometry + attribute)?\n\nWhat are the main vector file formats?\nWhat are the main data types we use to represent attributes?\nWhat kinds of data can we represent using vector data?\nWhat kinds of questions can we answer using attributes?\nWhat kinds of questions can we answer using geometries?\nWhat kinds of questions can we answer using both (i.e. geometry-based attribute calculations).\n\n\n\nPractical knowledge:\n?sec-lab_vec1\n\nHow to identify a vector file format\nHow to load a vector file\nHow to use the identify tool to get information on the fly\nThe concept of ‘selecting’ a feature.\nHow to select features using the click tools in QGIS\nHow to access the attribute table\nHow to use the statistical summary tool\n\nGlobal summaries vs summaries on selected data\n\nHow to select using simple queries (filter) on attributes\n\nBoolean operators\nString based operators\n\nHow to use attributes to set symbology\n\nSingle symbol\nCategorised\nGraduated\n\n\n?sec-lab_vec2\n\nHow to do combined attribute queries (AND / OR)\nHow to calculate new attributes\n\nNumeric attributes\nString attributes\nGeometry attributes\n\n\nHow to convert data types if needed\nAttribute selection vs attribute filtering\nHow to select based on location\n\nThe different selection options\nImportance of CRS matching\nSelect by location vs clipping -How to combine spatial and attribute selection\nSelecting within selections or saving intermediate results",
    "crumbs": [
      "Week 2 - Working with vector files"
    ]
  },
  {
    "objectID": "lab_vectors_1.html",
    "href": "lab_vectors_1.html",
    "title": "3  Lab 3: Working with Vectors",
    "section": "",
    "text": "3.1 Before you start!",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "lab_vectors_1.html#before-you-start",
    "href": "lab_vectors_1.html#before-you-start",
    "title": "3  Lab 3: Working with Vectors",
    "section": "",
    "text": "Go through the Week 2 preparatory session on Canvas, and watch the seminar recording if you have missed it.",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "lab_vectors_1.html#guided-exercise-1---basic-work-with-vector-data",
    "href": "lab_vectors_1.html#guided-exercise-1---basic-work-with-vector-data",
    "title": "3  Lab 3: Working with Vectors",
    "section": "3.2 Guided Exercise 1 - Basic work with Vector Data",
    "text": "3.2 Guided Exercise 1 - Basic work with Vector Data\nIn this exercise, you will learn how to open and read vector data.\n\nDownload the data for this exercise from here, then extract the zip files (make sure all the data are unzipped! Sometimes you have zipfiles inside zipfiles…) and organise them to your preference (use a similar folder structure as from week 1).\nLoad all three datasets in QGIS and inspect them. The file names are: global_earthquakes_2011.gpkg, MajorRivers.shp, and ne_50m_admin_0_countries.shp.\n\n\n\n\n\n\n\nStop and Think\n\n\n\n\nWhat are the datasets you have?\nWhat are the data models used by these datasets?\nWhat are the file formats you have to work with?\nWhich of these files contain metadata about your datasets?\nWhat is the CRS of each data layer you have?\n\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nYou can use the file names, the metadata, and the visual appearance of the layers to answer data. The global_earthquakes_2011.gpkg file seems to hold point data on recorded Earthquake locations in the year 2011. The MajorRivers.shp layer seems to hold line data on the world’s largest rivers. The ne_50m_admin_0_countries.shp seems to have boundaries for the world countries.\nAll three files use the vector data model, being a point vector, line vector and polygon vector respectively.\nThe earthquakes layer is given in the geopackage file format, while the other two layers are given in the shapefile file format. Notice that data model and file format are two different things, and they don’t necessarily imply each other. Geopackages, for example, can hold both vector and raster data.\nThe rivers layer has a plain text metadata file with a link that points to the source of the data, where more information can be found. The countries layer has an HTML file that holds metadata about the file. The earthquakes data has no metadata.\nAll three layers are using EPSG 4236 (WGS84 ‘unprojected’) as CRS. You check it by right clicking on the layer name and selecting Layer CRS, or by selecting Properties &gt; Information.\n\n\n\n\n\nCheck your Project properties to make sure they are correct (does the project CRS match the layers? What are the measurement units set for this project? Have you set the base folder?). Then save your project file within your folder structure as in previous labs.\nNow inspect the attribute table for each layer, by right-clicking on each layer name and then on Open Attribute Table. Then answer the following questions:\n\nStop and think:\nHow many features does each layer have?\n\n\n\n\n\n\nStop and Think\n\n\n\n\nHow many features does each layer have?\nHow many attributes does each feature have?\n\nTip: if you go to Properties &gt; Fields, you get a list of all attributes ordered by ID, whch is a sequential number. Maks it easier to count how many attributes when there are many.\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nEarthquakes: 15272; Rivers: 98; Countries: 241.\nEarthquakes: 5 (fid, Event, latitude, longitude, Magnitude, Date); Rivers: 4 (NAME, SYSTEM, MILES, KILOMETERS); Countries: 94 (featurecla, scalerank, etc…).\n\nIf you looked at Properties &gt; Fields, the last ID is 93, but the first one is 0, so 94 in total.\n\n\n\n\nRename your layers on the layer list to human-readable, informative names, then save your project. Remember that the new names will appear within this project only, the name of the source files in your folders will not change.\nOrganize the layer order and play with different layer superpositions to make the most readable visualisation for all datasets involved. Then experiment with the symbology of each layer to improve your visualization.",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "lab_vectors_1.html#guided-exercise-2-visualising-layer-attributes",
    "href": "lab_vectors_1.html#guided-exercise-2-visualising-layer-attributes",
    "title": "3  Lab 3: Working with Vectors",
    "section": "3.3 Guided Exercise 2: Visualising layer attributes",
    "text": "3.3 Guided Exercise 2: Visualising layer attributes\nOne of the main applications of vector data is the ability to select and then summarise the different fields of each layer to extract relevant information.\n\nTurn off the “Rivers” and “Earthquakes” layers. (Tip: to turn multiple layers off or on at once, highlight all the layers you need to make hidden (or visible) by holding down the Control key of your keyboard while you click, then hit the spacebar on your keyboard).\nGo to Layer Properties &gt; Symbology for the World Countries layer, and change the top option from Single Symbol to Categorized. This lets you assign different colurs based on attribute values. We will colour the countries based on the main region where they are. So, for Value, choose the REGION_UN attribute. Leave the Symbol option as is, and for Color Ramp, select Random Colors if not already. Then click on the Classify button on the bottom left of the large white space in the middle of the window. Then click on OK.\n\nNow lets use visualisation to understand the distribution of world population.\n\nReturn to the Symbology window and select Graduated instead of Categorized. Change your Value to the POP_EST attribute. Choose Magma as your colour ramp (click on the little arrow to the right), and select the Invert Color Ramp option.\nChange the classification Mode (above the classify button) to Equal interval, leave the number of Classes as 5 (to the left of Mode), and then click on Classify, then OK.\n\n\n\n\n\n\n\nStop and Think\n\n\n\n\nWhat is the difference between the Categorized and Graduated options?\nDoes the Equal Interval classification give a good visualization of the distribution of world population?\n\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nCategorized is for categorical, non-numeric variables (i.e. names, classes, etc.). Graduated is for continuous variables (i.e. quantities, measurements).\nNo, because China, India and to a lesser extent the US have much numbers than the rest, which biases the breakpoints. We will fix it in the next step.\n\n\n\n\n\nReturn to the Symbology window, and change the Mode from Equal Interval to Natural Breaks (Jenks), and increase the number of Classes to 10. Click on OK.\n\nWhen you are mapping your own data, make sure you explore the different methods for calculating breakpoints, and also play with the number of classes. You can see the ful explanation of each Mode on the QGIS Documentation.",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "lab_vectors_1.html#guided-exercise-3-operations-using-layer-attributes",
    "href": "lab_vectors_1.html#guided-exercise-3-operations-using-layer-attributes",
    "title": "3  Lab 3: Working with Vectors",
    "section": "3.4 Guided Exercise 3: Operations using layer attributes",
    "text": "3.4 Guided Exercise 3: Operations using layer attributes\nNow we will look into using expressions to select specific features according to their attributes.\n\nChange the symbology of the Countries layer to Single Symbol, and pick a dark gray. Then turn on the Rivers layer, change its symbology to a light blue, and make sure it is on top of the Countries layer.\nOpen the River layer’s attribute table (right click on its name then Open attribute table). Then click on the Select features using expression button (). You will see a new window with three panels, like the one below. If you only see two panels, then click on Show help:\n\n\nYou will encounter this expression window in other parts of QGIS as well. The way it works is that you type your expression on the left window, using the middle and right panels to browse and select operators to add to your expression. It will make more sense with an example:\n\nIn the middle panel, expand the Fields and Values item and then double click on KILOMETERS. It add this attribute name to the left panel. Notice that it is enclosed by double quotes. In the expression window, any word between double quotes means it is an attribute name. You can also type names directly in the window if you prefer.\nNow complete the expression by typing the remainder, so that the final expression is \"KILOMETERS\" &gt; 5000. This expression means “Select all River features that have a length - represented by the KILOMETERS attribute - larger than 5000”. Then click on the Select features button.\nCheck the results of your selection on the Attribute Table. The number of selected features should be shown on the top of the window (11), and selected features will be highlighted in blue. On the bottom left of the window, you can change from Show all features to Show selected features if you only want to see the selected features.\nAlso check the results of your selection on the Map canvas. All selected features will be highlighted in yellow. Tip: if you ever set the symbology of a feature yellow, remember to not confuse it with selected objects. When in doubt, check the attribute table.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nIt seems the selection is missing a few of the longest rivers in the world, such as the Amazon River? Why would that be?\nHint: try to use the manual selection tool () to click in the Amazon River.\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nThe different segments of the Amazon River officially receive different names: Amazonas (lower Amazon), Solimões (central Amazon) and Ucayali (upper Amazon). In this dataset, it is broken down into Amazon (with 3042 km) and Ucayali (with 2088 km). Since these are two separate features, neither selected by our expression.\n\n\n\n\nReturn to the attribute table and make sure that the rivers larger than 5000km are still selected. Then create a new expression: SYSTEM\" = 'Amazon'. Notice that we enclose the word Amazon with single quotes. This identifies this as a string, i.e. a character value, and differentiates it from an attribute name. Then instead of clicking on Select Features, click on the small arrow to the right and click in Add to Current Selection. Now your selection should include all river features that are longer than 5000 km or belong to the Amazon system (26 features in total).\n\nTip: If you can’t remember all the possible values of an attribute, select the attribute under Fields and Values and then on the right panel, double click on All Unique. QGIS will list all possible value options for that particular attribute.\n\nNow deselect all features by clicking on the Deselect button in the Attribute Table () or the Deselect from all layers button in the main QGIS toolbar (). It is always good to clear selections when you are done with a certain analysis, to avoid unexpected consequences.\n\nWe can use several operators to create expressions. For numeric values, we can use all logical operators: ‘greater than’ (\\(&gt;\\)), ‘lesser than’ (\\(&lt;\\)), their ‘or equal’ variants (\\(&lt;=\\), \\(&gt;=\\)) as well as ‘equal’ (\\(=\\)) or ‘not equal’ (\\(&lt;&gt;\\)). For strings (text), \\(=\\) and \\(&lt;&gt;\\) also work, but ou can use the operators \\(IS\\) and \\(IS NOT\\) (all upper case) instead. In the example above, we could have used \"SYSTEM\" IS 'Amazon' to get the same result.\nAnother class of useful operators are called Boolean operators: AND, OR and NOT. They allow us to create compound expressions with multiple criteria:\n\nReturn to the attribute table and this time use the following expression: \"KILOMETERS\" &gt; 5000 OR \"SYSTEM\" = 'Amazon'. You should get the same results as doing two separate selections and using Add to Current Selection. But it is also more powerful.\nClear your selection and create a new one with the expression \"KILOMETERS\" &gt; 1000 AND \"SYSTEM\" = 'Amazon'. When you use the AND operator, each feature must fulfil both criteria (like an intersection in set theory, if you remember your maths). When you use the OR keyword, then each feature can fulfil either criteria. Change the above expression from AND to OR and see how your selection changes.\nNow change the expression to \"KILOMETERS\" &gt; 1000 AND \"SYSTEM\" IS NOT 'Amazon' and see what you get.\nFinally, we have two useful operators for partial matching on strings. They are useful when you need to select based on a subset of the word values of an attribute:\nClear your selection and create a new one with the expression \"NAME\" LIKE 'Am%'. This should select all three rivers whose name starts with ‘Am’ (Amazon, Amu Darya and Amur). The ‘%’ symbol in this case is what we call a ‘wildcard’, and it means ‘anything else’.\nNow use the expression \"NAME\" LIKE 'C____' (four underscores, ’_‘). This should select all rivers whose name starts with ’C’ followed by any four characters (So it picks Congo and Chire).\n\n\n\n\n\n\n\nStop and Think\n\n\n\nHow many rivers would you get if you changed the above expression to \"NAME\" LIKE 'C%'?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nFour (Columbia, Colorado, Congo, Chire). When you use the ‘%’ wildcard it means ‘any amount of any character’.\n\n\n\n\nFinally, create a selection with the expression \"NAME\" LIKE 'AM%' (notice the uppercase). You won’t get any results. Then change the expression to \"NAME\" ILIKE 'AM%'. You should get the same three rivers starting with ‘Am’ again.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat is the difference between LIKE and ILIKE?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nThe LIKE operator is case sensitive, while ILIKE is case insensitive.\n\n\n\n\nBefore you move on to the next exercise, make sure you clear your selection.",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "lab_vectors_1.html#guided-exercise-3-summarising-layer-attributes",
    "href": "lab_vectors_1.html#guided-exercise-3-summarising-layer-attributes",
    "title": "3  Lab 3: Working with Vectors",
    "section": "3.5 Guided Exercise 3: Summarising layer attributes",
    "text": "3.5 Guided Exercise 3: Summarising layer attributes\nThe Statisitcal Summary Tool () is a quick way to sumamrise attribute values, and can be quite powerful when combined with the attribute selections.\n\nOn the main QGIS window, click on the Show Statistical Summary tool . A new panel will open. Select the “Rivers” layer as input, then select the KILOMETERS attribute on the drop-down menu. You will get a table with several summary statistics calculated for all features in the layer.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat are the longest, shortest, and mean kilometre lengths in the dataset?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nMax: 9207.1 km; Min: 194.9 km; Mean: 2663.6 km\n\n\n\n\nNow repeat the attribute selection you did before using the expression \"KILOMETERS\" &gt; 5000, and then return to the Statistical Summary panel. Then check the Selected Features Only box at the bottom of the window. Now the stats will be re-calculated for the selected features only.\nThe Statistical Summary panel is smart enough to know how to summarise different data types. For example, select the SYSTEM attributem, and see how the stats change - now it gives you how many in total (Count), how many unique values (Count(Distinct)), how many missing values (Count(Missing), the Minimum and Maximum string values (they don’t have a clear meaning here), the (Minority) and most (Majority) common unique values, and the Minimum length and Maximum length in number of characters.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhy do you get a blank value for Majority and a 0 for Minimum Lenght?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nFor the rivers dataset, Majority is blank and Minimum length is 0 because we have several NULL (missing) values. They have zero length, and they are in fact the majority in terms of unique values.",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "lab_vectors_2.html",
    "href": "lab_vectors_2.html",
    "title": "4  Lab 3: Working with Vectors",
    "section": "",
    "text": "4.1 Before you start!",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "lab_vectors_2.html#before-you-start",
    "href": "lab_vectors_2.html#before-you-start",
    "title": "4  Lab 3: Working with Vectors",
    "section": "",
    "text": "Go through the Week 2 preparatory session on Canvas, and watch the seminar recording if you have missed it.",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "lab_vectors_2.html#guided-exercise-1--",
    "href": "lab_vectors_2.html#guided-exercise-1--",
    "title": "4  Lab 3: Working with Vectors",
    "section": "4.2 Guided Exercise 1 -",
    "text": "4.2 Guided Exercise 1 -\n\n4.2.1",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>4</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  },
  {
    "objectID": "sec_w3_rasters.html",
    "href": "sec_w3_rasters.html",
    "title": "Week 1 - Introduction to GIS",
    "section": "",
    "text": "ILOs covered",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w3_rasters.html#ilos-covered",
    "href": "sec_w3_rasters.html#ilos-covered",
    "title": "Week 1 - Introduction to GIS",
    "section": "",
    "text": "Understand the structure of spatial data and choose appropriate data types and models for storing and representing it;\nObtain and assess the quality of spatial data from online and offline sources and produce new spatial data using computer and field methods;\nCreate map visualisations that adhere to cartographic principles and can be easily and unambiguously interpreted by the non-specialist public;",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w3_rasters.html#what-will-you-learn",
    "href": "sec_w3_rasters.html#what-will-you-learn",
    "title": "Week 1 - Introduction to GIS",
    "section": "What will you learn",
    "text": "What will you learn\nFor every week, we will list the main theoretical and practical learning goals. Use these as a ‘checklist’ to gauge your learning for each week. If you don’t feel confident you have learned any specific topic, then revisit the week’s material!\n\nTheoretical knowledge for Week 1:\n\nWhat are Geomatics, GIS, Remote Sensing and associated terms and fields?\nWhat is spatial data?\nWhat is a datum?\nWhat is a map projection?\nWhat is a Coordinate Reference System?\n\n\n\nPractical knowledge:\n1  Lab 1: QGIS overview and file management\n\nHow to launch QGIS\nHow to load a spatial data file\nHow to navigate the main QGIS interface\nHow to identify features\nHow to do basic measurements\nHow to do basic styling of spatial data\nHow to enter the layout editor\nHow to make and export a simple map layout\n\n2  Lab 2: Coordinate Reference Systems\n\nHow to check the Coordinate Reference System of a spatial file\nHow to set the CRS of a QGIS project\nHow to set the CRS of a spatial file when it is already known.\nHow to reproject(convert) a spatial file from one CRS to another\nWhat are the main CRSs you should be familiar with.",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w4_cartography.html",
    "href": "sec_w4_cartography.html",
    "title": "Week 1 - Introduction to GIS",
    "section": "",
    "text": "ILOs covered",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w4_cartography.html#ilos-covered",
    "href": "sec_w4_cartography.html#ilos-covered",
    "title": "Week 1 - Introduction to GIS",
    "section": "",
    "text": "Understand the structure of spatial data and choose appropriate data types and models for storing and representing it;\nObtain and assess the quality of spatial data from online and offline sources and produce new spatial data using computer and field methods;\nCreate map visualisations that adhere to cartographic principles and can be easily and unambiguously interpreted by the non-specialist public;",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w4_cartography.html#what-will-you-learn",
    "href": "sec_w4_cartography.html#what-will-you-learn",
    "title": "Week 1 - Introduction to GIS",
    "section": "What will you learn",
    "text": "What will you learn\nFor every week, we will list the main theoretical and practical learning goals. Use these as a ‘checklist’ to gauge your learning for each week. If you don’t feel confident you have learned any specific topic, then revisit the week’s material!\n\nTheoretical knowledge for Week 1:\n\nWhat are Geomatics, GIS, Remote Sensing and associated terms and fields?\nWhat is spatial data?\nWhat is a datum?\nWhat is a map projection?\nWhat is a Coordinate Reference System?\n\n\n\nPractical knowledge:\n1  Lab 1: QGIS overview and file management\n\nHow to launch QGIS\nHow to load a spatial data file\nHow to navigate the main QGIS interface\nHow to identify features\nHow to do basic measurements\nHow to do basic styling of spatial data\nHow to enter the layout editor\nHow to make and export a simple map layout\n\n2  Lab 2: Coordinate Reference Systems\n\nHow to check the Coordinate Reference System of a spatial file\nHow to set the CRS of a QGIS project\nHow to set the CRS of a spatial file when it is already known.\nHow to reproject(convert) a spatial file from one CRS to another\nWhat are the main CRSs you should be familiar with.",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w5_spatial_analysis_I.html",
    "href": "sec_w5_spatial_analysis_I.html",
    "title": "Week 1 - Introduction to GIS",
    "section": "",
    "text": "ILOs covered",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w5_spatial_analysis_I.html#ilos-covered",
    "href": "sec_w5_spatial_analysis_I.html#ilos-covered",
    "title": "Week 1 - Introduction to GIS",
    "section": "",
    "text": "Understand the structure of spatial data and choose appropriate data types and models for storing and representing it;\nObtain and assess the quality of spatial data from online and offline sources and produce new spatial data using computer and field methods;\nCreate map visualisations that adhere to cartographic principles and can be easily and unambiguously interpreted by the non-specialist public;",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "sec_w5_spatial_analysis_I.html#what-will-you-learn",
    "href": "sec_w5_spatial_analysis_I.html#what-will-you-learn",
    "title": "Week 1 - Introduction to GIS",
    "section": "What will you learn",
    "text": "What will you learn\nFor every week, we will list the main theoretical and practical learning goals. Use these as a ‘checklist’ to gauge your learning for each week. If you don’t feel confident you have learned any specific topic, then revisit the week’s material!\n\nTheoretical knowledge for Week 1:\n\nWhat are Geomatics, GIS, Remote Sensing and associated terms and fields?\nWhat is spatial data?\nWhat is a datum?\nWhat is a map projection?\nWhat is a Coordinate Reference System?\n\n\n\nPractical knowledge:\n1  Lab 1: QGIS overview and file management\n\nHow to launch QGIS\nHow to load a spatial data file\nHow to navigate the main QGIS interface\nHow to identify features\nHow to do basic measurements\nHow to do basic styling of spatial data\nHow to enter the layout editor\nHow to make and export a simple map layout\n\n2  Lab 2: Coordinate Reference Systems\n\nHow to check the Coordinate Reference System of a spatial file\nHow to set the CRS of a QGIS project\nHow to set the CRS of a spatial file when it is already known.\nHow to reproject(convert) a spatial file from one CRS to another\nWhat are the main CRSs you should be familiar with.",
    "crumbs": [
      "Week 1 - Introduction to GIS"
    ]
  },
  {
    "objectID": "lab_geoprocessing.html",
    "href": "lab_geoprocessing.html",
    "title": "5  Lab 9: Geoprocessing tools",
    "section": "",
    "text": "5.1 Guided Exercise: assessing children access to schools\nYou are a GIS analyst at the Stirling council, and you have been asked to perform an analysis regarding children access to schools. Your manager has indicated which data sources you should use, and they want you to answer how many children within the relevant age range live within less than 1km, between 1km and 2km, and further than 2km of any primary (4 to 10 years old) and secondary (11 to 17 years old) school. You have been instructed to use the census data at the most detailed level (Output Area, OA), and to limit your analysis to the OAs and schools that are within Stirling Council Area limits. You should report the results as a table.",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Lab 9: Geoprocessing tools</span>"
    ]
  },
  {
    "objectID": "lab_geoprocessing.html#guided-exercise-assessing-children-access-to-schools",
    "href": "lab_geoprocessing.html#guided-exercise-assessing-children-access-to-schools",
    "title": "5  Lab 9: Geoprocessing tools",
    "section": "",
    "text": "5.1.1 Obtaining the data\n\nThe first piece of data needed for this exercise is of course the limits of the Stirling Council Area. The official administrative boundary data for the UK is contained within the Ordnance Survey Boundary Line dataset. It can be downloaded from the Ordnance Survey Open Data Hub or from Digimap, but the files cover all of the UK, and thus are a very large download. To save precious lab time, we have already isolated the Stirling Council boundary as a separate file that you can download here. You are welcome!\n\nYou can then download the two other datasets needed:\n\nScottish School Roll and Locations: this dataset is provided by the Scottish Government, and contains information on all Scottish schools. Download the ‘Scottish School Roll and Locations ZIP’ (NOT the one with ‘Table’ on the name) from here.\nCensus data on population age: the Digimap platform offers access to the 2011 Census variables in spatial format. To obtain it, go to the Society tab, and then select the ‘Download’ option on the leftmost toolbar (a down arrow going into a ‘box’). That will bring up the familiar Digimap download interface. This time we will use our Stirling Council shapefile to set the search area. For that, click on the Import Polygons button, and then on Choose File. Then choose the zipped Stirling dataset you have downloaded and click on import. Finally, under the 2011 Census data layers tab, select the Age dataset. Your window should look like this:\n\n\n\n\n\n\n\n\nWarning\n\n\n\nThe data for the 2022 census have been officially published by National Records of Scotland, but are not available on Digimap yet. Since we are only practising our GIS knowledge, it is OK to use mismatched data (schools from 2024 vs. age data from 2011). In a real application scenario, it would be very important to make sure the temporal coverage of the datasets matches as well as possible.\n\n\n\nAdd your data to the basket and finish the order, then download the data as you have done in previous labs.\nNow create a folder structure for your project and extract and organise the contents of the three datasets. Then create a new QGIS project and import the three datasets. The census geopackage will contain layers for different levels of aggregation, remember you want the Output Area polygons. If everything worked correctly, you should have something like this:\n\n\n\n\n\n\n\n\nStop and Think\n\n\n\n\nWhat are the data models and file formats of each dataset?\nWhat are the attributes contained in each dataset?\nWhat is the CRS of each dataset? Are they all the same?\n\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\n\nThey all use the vector data model. The schools are vector points, the other are vector polygons.\nThe attributes of each dataset can be seen by either inspecting the attribute table of each dataset or by looking at the layer Properties &gt; Fields tab.\nAll three datasets are in OS British Standard Grid (EPSG 27700). You can find this out by either going to the Properties &gt; Information tab or by right-clicking on the layer name then on Layer CRS.\n\n\n\n\n\n\n\n5.1.2 Preparing the data\nYou may have noticed that your Digimap census data download includes many OA polygons that are outside of Stirling Council. This is because of a (sadly) very common problem with spatial data from different sources - the census output areas (OAs) do not perfectly line up with the administrative boundaries of the council. So when the Digimap interface tries to determine which OAs overlap with Stirling, we get more data than we need.\n\nSet the symbology of the Stirling boundaries to a red outline without fill. Then make sure this layer is on top of the census layer. Then zoom in very close to the Stirling boundary. You will see they are offset by about 1.5m:\n\n\nWe thus need to further subset our data to match the actual extent of the Stirling coucil.\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat are the options of GIS operations that you have to subset the datasets?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nYou could use Clip or Intersection if you wanted to change (‘cut’) the geometries of the target layer, or use Select by Location if you wanted to fidn the overlapping polygins without changing geometries.\n\n\n\nAfter consulting with your manager, you both decide that clipping or intersecting the data would not be a good option as it would change the geometry of the OAs, and there are official limits. So you decide to use Select by Location:\n\nGo to Vector &gt; Research Tools &gt; Select by Location... or click on the  button.\nSelect all polygons from the census layer that are within the Stirling bounds layer. Check the selection results.\nChange your criteria to include both intersect and are within the Stirling bounds layer. Check the selection results.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhy both selection attempts give you wrong results? How would you fix it?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nBecause of the mismatch between the boundaries of the OAs and the Stirlingshire boundaries. So inner OAs that are the edges of the council area are not considered fully within (they extend a sliver outwards from the actual bounds), and outer OAs also at the edges will be considered to intersect Stirling since they extend a sliver within the bounds.\nThink a bit on how to fix it, then continue below for a solution.\n\n\n\nYou could manually deselect the polygons that are not part of Stirling council, but then you have an idea: what if you buffer the Stirlingshire boundaries to expand them a tiny bit, and then try selecting the polygons within the buffer. That way OAs inside the council area that slightly extend outwards will fall within the buffer, while OAs outside the council area that slightly extend inward will still not be fully within it.\n\nGo to Vector &gt; Geoprocessing &gt; Buffer and create a 20m buffer around the Stirling layer. You can just leave it as a temporary layer, as we will only use it for our spatial selection.\nNow repeat the Select by location operation for OA polygons within the buffered area. Bingo!\nSave the selection as a new layer by right clicking on the census layer name and selecting Export &gt; Save Selected Features As... Once this new census layer is added to your project, remove the original one to avoid confusion.\n\n\n\n5.1.3 Answering the question\nNow we can answer the actual study question. As a reminder, it is how many children in the relevant age range live within less than 1km, between 1km and 2km, and further than 2km of any primary (4 to 10 years old) and secondary (11 to 17 years old) school?. You will need to use some of the Geoprocessing tools you just learned to answer that, as well as tools from previous weeks.\n\n\n\n\n\n\nStop and Think\n\n\n\nBefore you continue, try to think about the solution yourself. Look at the attributes of each layer, and then try to sketch a step by step plan to achieve the results you need. Then continue.\n\n\n\nYou will first need to add up the number of children at each 1yr age bracket to compute the totals for the primary and secondary school age ranges (4-10 yo and 11-17 yo). For that, you can use the Field Calculator, as in previous labs. Just add up the numbers for columns age_4 to age_10 into a new age_4-10 column, and then add columns age_11 to age_17 into a new age_11-17 column.\nThen you will need to select only the schools within the Stirling council area. You can use Select by location as above, using the Stirling bounds, or by using the LAname field in the attribute table of the School Roll layer. Both methods should give you a selection of 48 schools. Create a new layer containing just these schools, then remove the original school layer from the project.\nThe next step is to calculate the area covered by each distance bracket (1km, 2km) from the schools. For that, you should create a Buffer for the 1km distance, then a second Buffer for the 2km distance. Make sure you select the Dissolve result option when creating the buffers, since many locations will be within less than the specified distance from multiple schools, and we don’t want to repeat them.\nThen compute the Difference between the 2km and 1km buffers to create “rings” covering the range of 1km to 2km. This is important so we don’t “double count” the 1km bracket - see below.\n\nNow you have to deal with the biggest limitation of your analysis - the OAs are still very big, and many will span areas both within and outside the 1k and 2km distances. You discuss the problem with your manager again, and you decide that the best approach is to weight the children count of each OA by the respective area of the OA that is within each distance bracket. So if an OA has 15 children aged 11-17, and 40% of the OA area is within 1km of a school, then you should multiply 15 by 0.4 to obtain the estimated number of children within 1km.\n\nThe first step is to calculate the total area of each OA. You can do that by using the Field Calculator tool and creating a new field called oa_area that takes the $area parameter under the Geometry calculator operations. Remember to make this new field a Decimal number with two decimal places.\n\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat units were used for the area calculation? Does it matter?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nUnless you have set it differently in your Project properties, areas are calculated in squared metres by default. This is not an ideal unit for such large areas (km\\(^2\\) would have been better), but since we will only need to calculate the percentage of this total area within each distance bracket, it shouldn’t matter much.\n\n\n\nNow that you have the total areas for each OA, it is time to find out the portions within each distance bracket. For that, we can either Clip or get the Intersection of the buffer layers with the census layer.\n\n\n\n\n\n\nStop and Think\n\n\n\nWhat will change in your results if you use Intersection instead of Clip?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nIntersection will combine the attributes of both layers, while CLip will only preserve the attributes of the target layer.\n\n\n\n\nSince the buffers have been dissolved, they can’t be linked to individual schools anymore - whenever the buffers of two schools overlap their attribute tables will just keep the name of one of the schools when they are dissolved. So no need to preserve the buffer attributes, and we can use Clip. Create two new layers, the first being the clipping of the census layer by the 1km buffer layer, and the second being the clipping of the census layer by the 1km-2km ‘donuts’ layer. We use it instead of the 2km buffer otherwise when we calculate the percentage of area within 2km we will be double counting the area within 1km - which is already covered by the 1km buffer.\n\nYou should end up with something like the figure below. To make sure the layers don’t overlap, style them using hatching in different directions. If you see a cross-hatch, theyn they are overlapping, and it means you used the full 2km buffer instead of the 1km-2km ‘donut’:\n\n\nNow we can calculate the area percentages. First, re-calculate the polygon areas for the clipped layers, using the Field Calculator. Create a new attribute called clip_area, and assign the $area operator to it again. Remember to set it as a decimal number.\nStill using the Field Calculator, you can now calculate the percent area by creating a new attribute called perc_area, which will be clip_area / oa_area. It should also be a decimal number.\nFinally, calculate the weighted number of children by creating new fields. First calculate perc_4-10 as age_4-10 * perc_area, and then perc_11-17 as age_11-17 * perc_area. These fields should be integers, unless you are sending partial children to school.\n\nGreat, you are almost there! The last step is to aggregate all the data at the council level, and then also determine the number of children beyond 2km:\n\nUse the Statistical Summary tool to calculate the respective sums of perc_4-10 and perc_11-17. These are the final answers for how many children in the relevant age range live within less than 1km, between 1km and 2km?.\nTo get the number of children beyond 2km, use the Statistical Summary tool to calculate the total number of children within each age bracket (age_4-10 and age_11-17) in the council, and then subtract the number of children within 1km and between 1km and 2km from this total.\n\nYour final results should be:\n\n\n\n\n1km\n2km\n&gt;2km\n\n\n\n\nPrimary\n6451\n6656\n89\n\n\nSecondary\n7572\n7880\n91",
    "crumbs": [
      "Week 1 - Introduction to GIS",
      "<span class='chapter-number'>5</span>  <span class='chapter-title'>Lab 9: Geoprocessing tools</span>"
    ]
  },
  {
    "objectID": "lab_vectors_1.html#guided-exercise-4-calculating-new-attributes",
    "href": "lab_vectors_1.html#guided-exercise-4-calculating-new-attributes",
    "title": "3  Lab 3: Working with Vectors",
    "section": "3.6 Guided Exercise 4: Calculating new attributes",
    "text": "3.6 Guided Exercise 4: Calculating new attributes\nAnother powerful way to derive information from vector attributes is to make calculations involving multiple attributes. For that, we can use the Field Calculator tool (), accessible either from the Attribute table or the main QGIS toolbar.\n\nBefore your start, make sure you clear your selections.\nGo back to the Attribute Table window for the Rivers layer and click on the Field Calculator button to open it. It should look like this:\n\n\n\nOn the new window, make sure the Only update selected features option is not checked. Then name the new field Mi_to_Km, and change the output data type to Decimal Number. On the expression window, write “MILES” / “KILOMETERS”. Note the warning at the bottom. Now click on OK. Then turn off editing mode by clicking on the Toggle Editing () button. When asked, confirm you want to save the layer changes.\n\n::: {.callout-warning} Turning on editing mode is one of the most dangerous options in QGIS, as it lets you freely change both the geometry and the attribute values of a layer. Using the Field calculator automatically puts you on editing mode, so always make sure you turn it off immediately after you have finished a calculation. Once you make any changes and then save the changes, there is no turning back. I’ll often first export a copy of the layer if I need to do any edits, so I aways have the original as a backup if something goes wrong. We’ll revisit editing mode on week 4, when we learn how to digitse and edit geometries by hand.\n\n\n\n\n\n\nStop and Think\n\n\n\nDoes the Miles to Km proportion you calculated seem right?\n\n\n\n\n\n\n\n\nClick for answer\n\n\n\n\n\nYes, 1 Mile = 1.609 kilometres.\n\n\n\n\nThis new field you calculated is not very useful. Let us get rid of it. Put the attribute table back into editing mode, then click on the Delete Field button (), and select your Mi_to_Km field. Click OK. It’s gone! Remember to save the changes and exit edit mode.\n\nTip: if you want to rename an attribute, create a new one with the new name and just use the name of the old one as the expression on the Field Calculator. It will copy all values to the new attribute. Then remove the old one.",
    "crumbs": [
      "Week 2 - Working with vector files",
      "<span class='chapter-number'>3</span>  <span class='chapter-title'>Lab 3: Working with Vectors</span>"
    ]
  }
]